<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <meta name="description" content="Szkolenia - eCVjob.pl. Przeglądaj i wyszukuj szkolenia.">
    <meta name="keywords" content="szkolenia, kursy, edukacja, eCVjob">
    <title>Szkolenia - eCVjob.pl</title>
    <link rel="icon" type="image/x-icon" href="./favicon.ico">
    <link rel="preload" href="./images/tlo.jpg" as="image">
    <style>
        html, body { overflow-x: hidden; }
        body {
            font-family: Arial, sans-serif;
            background: url("images/tlo.jpg") no-repeat center center fixed;
            background-size: cover;
            color: #fff;
            min-height: 100vh;
            line-height: 1.6;
        }
        /* Fixed, fitted background on small screens */
        @media (max-width: 768px) {
            body { background: transparent !important; }
            body::before {
                content: '';
                position: fixed;
                top: 0; left: 0; right: 0; bottom: 0;
                background: url('images/tlo.jpg') no-repeat center center;
                background-size: cover;
                z-index: -1;
                pointer-events: none;
                transform: translateZ(0);
            }
        }
        /* Globalny przycisk Wstecz (zamiast paska nawigacji) */
        .back-btn { position: fixed; top: calc(14px + env(safe-area-inset-top)); left: 14px; z-index: 9999; background: rgba(0,0,0,0.85); color:#00ff00; border:2px solid #00ff00; border-radius: 12px; padding: 10px 14px; font-weight: 800; letter-spacing: .5px; box-shadow: 0 6px 24px rgba(0,255,0,.25); }
        .back-btn:active { transform: scale(.98) }
        @media (max-width: 768px) { .back-btn { font-size: 14px } }
        .main-container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 40px 20px;
            display: flex;
            flex-direction: column;
            align-items: center; /* center all direct children */
        }
        .page-title {
            text-align: center;
            margin-bottom: 30px;
        }
        .page-title h1 {
            font-size: 2.3rem;
            color: #00fff7;
            letter-spacing: 2px;
            text-shadow: 0 0 18px #00fff7;
        }
        .page-title p {
            color: #ccc;
            font-size: 1.1rem;
        }
        /* Search Section (jak oferty-pracy/uslugi) */
        .search-section {
            background: rgba(0,0,0,0.7);
            padding: 30px;
            border-radius: 15px;
            margin: 0 auto 32px auto;
            box-shadow: 0 10px 30px rgba(0,255,0,0.1);
            width: 100%;
            max-width: 900px;
        }
        .search-form {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr auto;
            gap: 15px;
            align-items: end;
        }
        @media (max-width: 900px) {
            .search-form { grid-template-columns: 1fr 1fr; }
        }
        @media (max-width: 600px) {
            .search-section { padding: 16px 4vw; }
            .search-form { grid-template-columns: 1fr; gap: 12px; }
            .search-btn { width: 100%; padding: 14px 0; font-size: 1.1rem; }
        }
        .form-group { display: flex; flex-direction: column; }
        .form-group label { color: #00ff00; margin-bottom: 6px; font-weight: bold; }
        .form-group input, .form-group select {
            padding: 12px;
            border: 2px solid #333;
            border-radius: 8px;
            background: #1a1a1a;
            color: #fff;
            font-size: 1rem;
        }
        .form-group input:focus, .form-group select:focus { outline: none; border-color: #00ff00; box-shadow: 0 0 10px rgba(0,255,0,0.3); }
        .search-btn {
            padding: 12px 25px;
            background: linear-gradient(45deg, #00ff00, #00cc00);
            color: #111;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1rem;
        }
        .search-btn:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0,255,0,0.4); }
        /* Stats (spójne z oferty-pracy/uslugi) */
        .stats-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 0 auto 32px auto;
            width: 100%;
            max-width: 900px;
        }
        .stat-card {
            background: rgba(0,0,0,0.7);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            border: 2px solid #333;
            transition: all 0.3s;
        }
        .stat-card:hover { border-color: #00ff00; transform: translateY(-5px); box-shadow: 0 10px 25px rgba(0,255,0,0.2); }
        .stat-number { font-size: 2.2rem; font-weight: 800; color: #00ff00; margin-bottom: 8px; text-shadow: 0 0 12px #00ff0033; }
        .stat-label { color: #ccc; font-size: 1.05rem; letter-spacing: .3px; }
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            width: 100%;
            max-width: 900px; /* keep content centered and narrower */
            margin-left: auto;
            margin-right: auto;
        }
        .szkolenia-count {
            background: #00ff00;
            color: #111;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 1.1rem;
            margin-left: 10px;
            box-shadow: 0 2px 12px #00ff0033;
            display: inline-block;
            min-width: 60px;
            text-align: center;
            letter-spacing: 1px;
        }
        .search-bar {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-bottom: 24px;
            width: 100%;
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
        }
        .search-bar input {
            width: 260px;
            max-width: 100%;
            padding: 12px;
            border-radius: 10px;
            border: 2px solid #00ff00;
            font-size: 1.1rem;
            background: #111;
            color: #fff;
        }
        .search-bar button {
            background: #00ff00;
            color: #111;
            font-weight: bold;
            padding: 12px 28px;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            cursor: pointer;
        }
        .szkolenia-cards-grid {
            display: grid;
            gap: 20px;
            grid-template-columns: 1fr;
            margin-bottom: 30px;
            width: 100%;
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
        }
        .szkolenie-card {
            background: rgba(0,0,0,0.7);
            border: 2px solid #333;
            border-radius: 15px;
            padding: 25px;
            transition: all 0.3s;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            gap: 10px;
            /* iOS: ensure inner effects respect rounded corners */
            overflow: hidden;
            mask-image: radial-gradient(circle, #000 99%, transparent 100%);
            -webkit-mask-image: -webkit-radial-gradient(white, black);
            clip-path: inset(0 round 15px);
        }
        .szkolenie-card:hover {
            border-color: #00ff00;
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,255,0,0.2);
        }
        .szkolenie-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: #fff;
            margin-bottom: 5px;
        }
        .szkolenie-typ {
            color: #00ff00;
            font-weight: bold;
            font-size: 1.1rem;
        }
        .szkolenie-opis {
            color: #ccc;
            line-height: 1.6;
        }
        .szkolenie-cena {
            color: #FFD700;
            font-weight: bold;
            font-size: 1.1rem;
        }
        /* --- Paginacja: identyczny styl jak uslugi.html --- */
                .pagination-bar {
          display: flex;
          flex-wrap: wrap;
          justify-content: center;
          align-items: center;
          gap: 8px;
          margin: 30px 0;
          padding: 20px;
          background: rgba(0,0,0,0.8);
          border-radius: 15px;
          border: 2px solid #00ff00;
          box-shadow: 0 4px 20px rgba(0,255,0,0.3);
                    overflow: hidden; /* zapobiega "wyciekaniu" na krawędzie na iPhonie */
                    width: 100%;
                    max-width: 900px;
                    margin-left: auto;
                    margin-right: auto;
        }
        .pagination-btn {
          position: relative;
          overflow: hidden;
          padding: 12px 18px;
          border: 2px solid #00ff00;
          background: rgba(0,0,0,0.8);
          color: #00ff00;
          border-radius: 8px;
          cursor: pointer;
          font-weight: bold;
          transition: all 0.3s ease;
          min-width: 45px;
          text-align: center;
        }
        .pagination-btn::before {
          content: '';
          position: absolute;
          top: 0;
          left: -100%;
          width: 100%;
          height: 100%;
          background: linear-gradient(90deg, transparent, rgba(0,255,0,0.3), transparent);
          transition: left 0.5s;
          z-index: 1;
        }
        .pagination-btn:hover::before {
          left: 100%;
        }
        .pagination-btn:active {
          transform: scale(0.95);
        }
        .pagination-btn .ripple {
          position: absolute;
          border-radius: 50%;
          background: rgba(0,255,0,0.6);
          transform: scale(0);
          animation: ripple 0.6s linear;
          z-index: 1;
        }
        @keyframes ripple {
          to {
            transform: scale(4);
            opacity: 0;
          }
        }
        .pagination-btn:hover:not(:disabled) {
          background: rgba(0,255,0,0.2);
          box-shadow: 0 0 15px rgba(0,255,0,0.5);
          transform: translateY(-2px);
        }
        .pagination-btn:disabled {
          opacity: 0.5;
          cursor: not-allowed;
          transform: none;
        }
        .pagination-btn.active {
          background: #00ff00;
          color: #111;
          box-shadow: 0 0 20px rgba(0,255,0,0.8);
          transform: scale(1.1);
        }
        .pagination-separator {
          color: #00ff00;
          margin: 0 8px;
          font-weight: bold;
          text-shadow: 0 0 5px #00ff00;
        }
        .pagination-position-info {
          color: #00ff00;
          font-size: 0.9rem;
          font-weight: bold;
          text-shadow: 0 0 5px #00ff00;
        }
        .pagination-advanced-nav {
          background: rgba(0,255,0,0.1);
          border: 1px solid #00ff00;
          border-radius: 10px;
          padding: 8px 15px;
          margin-left: 20px;
        }
        .pagination-jump-label {
          color: #00ff00;
          font-size: 0.9rem;
          font-weight: bold;
          text-shadow: 0 0 5px #00ff00;
        }
        .pagination-jump-input {
          padding: 8px 12px;
          background: rgba(0,0,0,0.8);
          border: 2px solid #00ff00;
          color: #00ff00;
          border-radius: 6px;
          font-size: 14px;
          text-align: center;
          outline: none;
          transition: all 0.3s ease;
          position: relative;
          z-index: 1;
        }
        .pagination-jump-input:focus {
          background: rgba(0,255,0,0.1);
          box-shadow: 0 0 10px rgba(0,255,0,0.5);
        }
        .pagination-jump-btn {
          padding: 8px 16px;
          background: rgba(0,0,0,0.8);
          border: 2px solid #ff2222;
          color: #ff2222;
          border-radius: 6px;
          cursor: pointer;
          font-weight: bold;
          transition: all 0.3s ease;
          font-size: 14px;
          position: relative;
          overflow: hidden;
          z-index: 1;
        }
        .pagination-jump-btn:hover:not(:disabled) {
          background: #ff2222;
          color: #111;
          border-color: #ff2222;
          box-shadow: 0 0 18px #ff2222, 0 0 36px #ff2222;
        }

                /* Wyśrodkowanie i responsywność przycisku "+ Dodaj szkolenie" */
                #openAddSzkolenieModal { display:block; margin: 0 auto; max-width: 92vw; }

                /* Responsywność paginacji i CTA na małych ekranach (iPhone) */
                @media (max-width: 600px) {
                    .section-header { flex-direction: column; justify-content: center; gap: 8px; text-align: center; }
                    .search-bar { gap: 8px; }
                    .search-bar input, .search-bar button { width: 100%; }
                    .pagination-bar { padding: 12px; gap: 6px; }
                    .pagination-btn { padding: 10px 14px; min-width: 38px; font-size: 0.95rem; }
                    .pagination-advanced-nav { width: 100%; margin-left: 0; margin-top: 10px; display: flex; flex-wrap: wrap; justify-content: center; gap: 8px; }
                    .pagination-jump-input { width: 56px !important; padding: 6px 8px; font-size: 13px; }
                    .pagination-jump-btn { padding: 8px 10px; font-size: 13px; }
                    .pagination-position-info, .pagination-jump-label { font-size: 0.85rem; }
                    #openAddSzkolenieModal { width: 90vw; padding: 18px 16px !important; box-shadow: 0 3px 14px rgba(0,255,0,0.28) !important; }
                }

        /* Przyciski w kartach szkoleń */
        .btn-details, .btn-kontakt {
            background: linear-gradient(90deg, #00ff00 0%, #00cc00 100%);
            color: #111;
            border: none;
            border-radius: 14px;
            padding: 13px 34px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.22s;
            font-size: 1.08rem;
            box-shadow: 0 2px 14px #00ff0033;
            margin: 0 8px 0 0;
            letter-spacing: 0.5px;
            outline: none;
            position: relative;
            display: inline-block;
        }
        .btn-details:last-child, .btn-kontakt:last-child {
            margin-right: 0;
        }
        .btn-details:hover, .btn-kontakt:hover {
            background: linear-gradient(90deg, #00cc00 0%, #00ff00 100%);
            color: #fff;
            box-shadow: 0 6px 24px #00ff0055;
            transform: translateY(-2px) scale(1.04);
        }
        .btn-details:active, .btn-kontakt:active {
            background: #00ff00;
            color: #111;
            transform: scale(0.98);
        }
        /* --- Karty identyczne jak w uslugi.html/oferty-pracy.html --- */
        .service-cards-grid {
            display: grid;
            gap: 20px;
            grid-template-columns: 1fr;
            margin-bottom: 30px;
            width: 100%;
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
        }
        .job-card {
            background: rgba(0,0,0,0.7);
            border: 2px solid #333;
            border-radius: 15px;
            padding: 25px;
            transition: all 0.3s;
            cursor: pointer;
            /* iOS: ensure inner effects respect rounded corners */
            overflow: hidden;
            mask-image: radial-gradient(circle, #000 99%, transparent 100%);
            -webkit-mask-image: -webkit-radial-gradient(white, black);
            clip-path: inset(0 round 15px);
        }
        .job-card:hover {
            border-color: #00ff00;
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,255,0,0.2);
        }
        .job-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 15px; }
        .job-title { font-size: 1.5rem; font-weight: bold; color: #fff; margin-bottom: 5px; }
        .job-description { color: #ccc; line-height: 1.6; margin-bottom: 20px; }
    .job-actions { display: flex; gap: 15px; flex-wrap: wrap; }
        .btn-contact {
            background: linear-gradient(45deg, #00ff00, #00cc00);
            color: #111;
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        .btn-contact:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0,255,0,0.4); }
    .btn-details { background: transparent; color: #00ff00; border: 2px solid #00ff00; padding: 10px 20px; border-radius: 8px; font-weight: bold; cursor: pointer; transition: all 0.3s; }
        .btn-details:hover { background: #00ff00; color: #111; }
        /* Premium overlay (na przyszłość) */
        .premium-card { border: 3px solid gold !important; box-shadow: 0 0 40px gold, 0 0 32px 8px #FFD70099 !important; background: rgba(30,30,0,0.18) !important; position: relative; animation: premium-glow 2s infinite alternate; overflow: hidden; }
        .premium-overlay { position: absolute; inset: 0; background: transparent; z-index: 1; pointer-events: none; box-shadow: 0 0 32px 8px #FFD70099, 0 0 12px 2px #FFD70055; }
        @keyframes premium-glow { 0% { box-shadow: 0 0 40px gold, 0 0 0px #FFD700; } 100% { box-shadow: 0 0 60px #FFD700, 0 0 20px gold; } }
        
        /* Text wrapping inside cards to avoid overflow on iPhone */
        .job-card, .job-card * ,
        .szkolenie-card, .szkolenie-card * {
            overflow-wrap: anywhere;
            word-break: break-word;
            hyphens: auto;
        }
        .job-title, .job-description { overflow-wrap: anywhere; }

        /* Clip modals to rounded corners on iOS while allowing vertical scroll */
        #addSzkolenieModal > div,
        #editSzkolenieModal > div {
            mask-image: radial-gradient(circle, #000 99%, transparent 100%);
            -webkit-mask-image: -webkit-radial-gradient(white, black);
            clip-path: inset(0 round 22px);
            contain: paint;
        }
    </style>
</head>
<body>
    <img src="images/logo.png" alt="Logo" style="position:fixed; top:80px; right:0; width:180px; opacity:0.13; z-index:0; pointer-events:none; user-select:none;" />
        <button id="global-back-btn" class="back-btn" type="button">← Wstecz</button>
        <script>
            document.addEventListener('DOMContentLoaded', function(){
                var backBtn = document.getElementById('global-back-btn');
                if (backBtn) backBtn.addEventListener('click', function(){
                    if (history.length > 1) { history.back(); } else { window.location.href = 'index.html'; }
                });
            });
        </script>
    <main class="main-container">
        <div class="page-title">
            <h1>🎓 Szkolenia</h1>
            <p>Przeglądaj i wyszukuj szkolenia z naszej bazy</p>
        </div>
        <!-- Statystyki: aktywne, nowe dziś, wykonawcy -->
        <section class="stats-section" id="szkoleniaStats">
            <div class="stat-card">
                <div class="stat-number" id="statActiveSzkolenia">0</div>
                <div class="stat-label">Aktywnych szkoleń</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="statNewToday">0</div>
                <div class="stat-label">Nowych dzisiaj</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="statWykonawcy">0</div>
                <div class="stat-label">Wykonawców</div>
            </div>
        </section>
        <div class="section-header">
            <h2 class="section-title">Najnowsze szkolenia</h2>
            <span class="szkolenia-count" id="szkoleniaCount">Ładowanie...</span>
        </div>
        <div style="display:flex;justify-content:center;margin:32px 0 18px 0;">
            <button id="openAddSzkolenieModal" style="font-size:2rem;padding:22px 54px;background:#00ff00;color:#111;font-weight:bold;border:none;border-radius:16px;cursor:pointer;box-shadow:0 4px 24px #00ff0033;transition:background 0.2s,transform 0.2s;letter-spacing:1px;">+ Dodaj szkolenie</button>
        </div>
        <!-- Panel filtrowania i sortowania -->
        <div id="filterSortPanel" style="display:flex;flex-wrap:wrap;gap:18px;align-items:center;justify-content:center;margin:18px 0 10px 0;padding:18px 12px 10px 12px;background:rgba(0,255,0,0.07);border-radius:14px;box-shadow:0 2px 12px #00ff0033;">
            <select id="filterType" style="padding:10px 14px;border-radius:8px;border:1.5px solid #00ff00;background:#181f1b;color:#fff;">
                <option value="">Wszystkie typy</option>
                <option value="Darmowe">Darmowe</option>
                <option value="Płatne">Płatne</option>
            </select>
            <select id="sortBy" style="padding:10px 14px;border-radius:8px;border:1.5px solid #00ff00;background:#181f1b;color:#fff;">
                <option value="dateDesc">Sortuj: najnowsze</option>
                <option value="dateAsc">Sortuj: najstarsze</option>
                <option value="priceAsc">Sortuj: najtańsze</option>
                <option value="priceDesc">Sortuj: najdroższe</option>
            </select>
        </div>
                <!-- Modal dodawania szkolenia (tylko jeden, poprawny) -->
                <div id="addSzkolenieModal" style="display:none;position:fixed;z-index:10000;left:0;top:0;width:100vw;height:100vh;background:rgba(0,0,0,0.65);align-items:center;justify-content:center;overflow:auto;">
                    <div style="background:rgba(20,28,22,0.98);max-width:500px;width:95vw;max-height:90vh;overflow-y:auto;padding:64px 28px 38px 28px;border-radius:22px;box-shadow:0 12px 48px #00ff0033;position:relative;border:2.5px solid #00ff00;margin:40px auto 40px auto;">
                        <button id="closeAddSzkolenieModal" type="button" style="position:absolute;top:24px;right:24px;background:none;border:none;font-size:2.7rem;line-height:1;color:#00ff00;cursor:pointer;transition:color 0.2s;z-index:2;font-weight:bold;">&times;</button>
                        <h3 style="color:#00ff00;text-align:center;margin-bottom:28px;font-size:2rem;letter-spacing:1px;font-weight:900;text-shadow:0 0 18px #00ff00;">Dodaj szkolenie</h3>
                        <form id="addSzkolenieForm" autocomplete="off" style="display:flex;flex-direction:column;gap:20px;">
                            <div style="margin-bottom:14px;">
                                <label style="color:#00ff00;font-weight:700;margin-bottom:8px;display:block;font-size:1.08rem;">Tytuł szkolenia*</label>
                                <input type="text" name="tytul" id="tytulInput" required style="width:100%;padding:15px 16px;margin-bottom:0;border-radius:12px;border:2px solid #00ff00;background:#181f1b;color:#fff;font-size:1.13rem;outline:none;transition:border 0.2s;box-sizing:border-box;">
                                <div id="tytulError" style="color:#ff4444;font-size:0.98rem;margin-top:4px;display:none;"></div>
                            </div>
                            <div style="display:flex;gap:18px;margin-bottom:14px;flex-wrap:wrap;">
                                <div style="flex:1;">
                                    <label style="color:#00ff00;font-weight:700;margin-bottom:8px;display:block;font-size:1.08rem;">Typ ogłoszenia</label>
                                    <select name="typ" id="typSzkoleniaSelect" style="width:100%;padding:15px 16px;margin-bottom:0;border-radius:12px;border:2px solid #00ff00;background:#181f1b;color:#fff;font-size:1.13rem;outline:none;box-sizing:border-box;">
                                        <option value="Darmowe">Ogłoszenie bezpłatne</option>
                                        <option value="Płatne">Ogłoszenie płatne</option>
                                    </select>
                                </div>
                                <div style="flex:1;">
                                    <label style="color:#00ff00;font-weight:700;margin-bottom:8px;display:block;font-size:1.08rem;">Cena</label>
                                    <select name="cena" id="cenaSzkoleniaSelect" style="width:100%;padding:15px 16px;margin-bottom:0;border-radius:12px;border:2px solid #00ff00;background:#181f1b;color:#fff;font-size:1.13rem;outline:none;box-sizing:border-box;">
                                        <option value="0">Bezpłatne</option>
                                        <option value="49.99">49,99 zł (płatne)</option>
                                    </select>
                                </div>
                                <div style="flex:1;min-width:240px;">
                                    <label style="color:#00ff00;font-weight:700;margin-bottom:8px;display:block;font-size:1.08rem;">Tryb realizacji</label>
                                    <select id="trybRealizacji" style="width:100%;padding:15px 16px;border-radius:12px;border:2px solid #00ff00;background:#181f1b;color:#fff;">
                                        <option>Online</option>
                                        <option>Stacjonarne</option>
                                        <option>Hybrydowe</option>
                                    </select>
                                </div>
                                <div style="flex:1;min-width:240px;">
                                    <label style="color:#00ff00;font-weight:700;margin-bottom:8px;display:block;font-size:1.08rem;">Język szkolenia</label>
                                    <input id="jezykSzkolenia" type="text" placeholder="np. Polski, English" style="width:100%;padding:15px 16px;border-radius:12px;border:2px solid #00ff00;background:#181f1b;color:#fff;">
                                </div>
                            </div>
                            <div id="platneInfoBox" style="display:none;margin-bottom:14px;padding:14px 12px;background:rgba(0,255,0,0.08);border:1.5px solid #00ff00;border-radius:10px;color:#00ff00;font-weight:600;text-align:center;">
                                To ogłoszenie jest płatne. Opłata za publikację wynosi <b>49,99 zł</b>.<br>
                                <button type="button" id="pay49Btn" style="margin-top:10px;padding:12px 32px;background:linear-gradient(90deg,#00ff00,#00fff7);color:#111;font-weight:bold;border:none;border-radius:12px;font-size:1.1rem;cursor:pointer;box-shadow:0 2px 12px #00ff0033;">Opłać 49,99 zł</button>
                            </div>
                            <div style="display:flex;gap:18px;margin-bottom:14px;flex-wrap:wrap;">
                                <div style="flex:1;">
                                    <label style="color:#00ff00;font-weight:700;margin-bottom:8px;display:block;font-size:1.08rem;">Lokalizacja*</label>
                                    <input type="text" name="lokalizacja" id="lokalizacjaInput" required placeholder="np. Online, Warszawa" style="width:100%;padding:15px 16px;margin-bottom:0;border-radius:12px;border:2px solid #00ff00;background:#181f1b;color:#fff;font-size:1.13rem;outline:none;box-sizing:border-box;">
                                    <div id="lokalizacjaError" style="color:#ff4444;font-size:0.98rem;margin-top:4px;display:none;"></div>
                                </div>
                                <div style="flex:1;">
                                    <label style="color:#00ff00;font-weight:700;margin-bottom:8px;display:block;font-size:1.08rem;">Termin*</label>
                                    <input type="datetime-local" name="termin" id="terminInput" required style="width:100%;padding:15px 16px;margin-bottom:0;border-radius:12px;border:2px solid #00ff00;background:#181f1b;color:#fff;font-size:1.13rem;outline:none;box-sizing:border-box;">
                                    <div id="terminError" style="color:#ff4444;font-size:0.98rem;margin-top:4px;display:none;"></div>
                                </div>
                                <div style="flex:1;min-width:220px;">
                                    <label style="color:#00ff00;font-weight:700;margin-bottom:8px;display:block;font-size:1.08rem;">Czas trwania</label>
                                    <div style="display:flex;gap:10px;align-items:center;">
                                        <input id="czasTrwania" type="number" min="1" placeholder="np. 8" style="flex:1;padding:15px 16px;border-radius:12px;border:2px solid #00ff00;background:#181f1b;color:#fff;">
                                        <select id="jednostkaCzasu" style="padding:12px 14px;border-radius:12px;border:2px solid #00ff00;background:#181f1b;color:#fff;">
                                            <option>godz.</option>
                                            <option>dni</option>
                                        </select>
                                    </div>
                                </div>
                                <div style="flex:1;min-width:220px;">
                                    <label style="color:#00ff00;font-weight:700;margin-bottom:8px;display:block;font-size:1.08rem;">Liczba miejsc</label>
                                    <input id="liczbaMiejsc" type="number" min="1" placeholder="np. 20" style="width:100%;padding:15px 16px;border-radius:12px;border:2px solid #00ff00;background:#181f1b;color:#fff;">
                                </div>
                            </div>
                            <div style="margin-bottom:14px;">
                                <label style="color:#00ff00;font-weight:700;margin-bottom:8px;display:block;font-size:1.08rem;">Opis*</label>
                                <textarea name="opis" id="opisInput" required style="width:100%;padding:15px 16px;margin-bottom:0;border-radius:12px;border:2px solid #00ff00;background:#181f1b;color:#fff;font-size:1.13rem;min-height:80px;outline:none;box-sizing:border-box;"></textarea>
                                <div id="opisError" style="color:#ff4444;font-size:0.98rem;margin-top:4px;display:none;"></div>
                            </div>
                            <div style="display:flex;gap:18px;margin-bottom:14px;flex-wrap:wrap;">
                                <div style="flex:1;min-width:240px;">
                                    <label style="color:#00ff00;font-weight:700;margin-bottom:8px;display:block;font-size:1.08rem;">Cena szkolenia</label>
                                    <div style="display:flex;gap:10px;align-items:center;">
                                        <input id="cenaKursu" type="number" min="0" step="0.01" placeholder="np. 499.00" style="flex:1;padding:15px 16px;border-radius:12px;border:2px solid #00ff00;background:#181f1b;color:#fff;">
                                        <select id="walutaKursu" style="padding:12px 14px;border-radius:12px;border:2px solid #00ff00;background:#181f1b;color:#fff;">
                                            <option>PLN</option>
                                            <option>EUR</option>
                                        </select>
                                    </div>
                                </div>
                                <div style="flex:1;min-width:240px;">
                                    <label style="color:#00ff00;font-weight:700;margin-bottom:8px;display:block;font-size:1.08rem;">Poziom</label>
                                    <select id="poziomKursu" style="width:100%;padding:15px 16px;border-radius:12px;border:2px solid #00ff00;background:#181f1b;color:#fff;">
                                        <option>Podstawowy</option>
                                        <option>Średniozaawansowany</option>
                                        <option>Zaawansowany</option>
                                    </select>
                                </div>
                                <div style="flex:1;min-width:240px;">
                                    <label style="color:#00ff00;font-weight:700;margin-bottom:8px;display:block;font-size:1.08rem;">Organizator</label>
                                    <input id="organizator" type="text" placeholder="Nazwa organizatora" style="width:100%;padding:15px 16px;border-radius:12px;border:2px solid #00ff00;background:#181f1b;color:#fff;">
                                </div>
                            </div>
                            <div style="margin-bottom:14px;">
                                <label style="color:#00ff00;font-weight:700;margin-bottom:8px;display:block;font-size:1.08rem;">Prowadzący</label>
                                <div id="trainersList"></div>
                                <button type="button" id="addTrainerBtn" style="margin-top:8px;padding:10px 16px;border-radius:10px;border:2px solid #00ff00;background:#111;color:#00ff00;cursor:pointer;">+ Dodaj prowadzącego</button>
                            </div>
                            <div style="display:flex;gap:18px;margin-bottom:14px;flex-wrap:wrap;">
                                <div style="flex:1;min-width:260px;">
                                    <label style="color:#00ff00;font-weight:700;margin-bottom:8px;display:block;font-size:1.08rem;">Kontakt e-mail</label>
                                    <input id="kontaktEmail" type="email" placeholder="np. szkolenia@twojadomena.pl" style="width:100%;padding:15px 16px;border-radius:12px;border:2px solid #00ff00;background:#181f1b;color:#fff;">
                                </div>
                                <div style="flex:1;min-width:220px;">
                                    <label style="color:#00ff00;font-weight:700;margin-bottom:8px;display:block;font-size:1.08rem;">Kontakt telefon</label>
                                    <input id="kontaktTel" type="tel" placeholder="np. +48 123 456 789" style="width:100%;padding:15px 16px;border-radius:12px;border:2px solid #00ff00;background:#181f1b;color:#fff;">
                                </div>
                            </div>
                            <div style="display:flex;gap:18px;margin-bottom:14px;flex-wrap:wrap;">
                                <div style="flex:1;min-width:240px;">
                                    <label style="color:#00ff00;font-weight:700;margin-bottom:8px;display:block;font-size:1.08rem;">Strona WWW</label>
                                    <input id="linkWWW" type="url" placeholder="https://..." style="width:100%;padding:15px 16px;border-radius:12px;border:2px solid #00ff00;background:#181f1b;color:#fff;">
                                </div>
                                <div style="flex:1;min-width:240px;">
                                    <label style="color:#00ff00;font-weight:700;margin-bottom:8px;display:block;font-size:1.08rem;">Wydarzenie na FB</label>
                                    <input id="linkFB" type="url" placeholder="https://facebook.com/..." style="width:100%;padding:15px 16px;border-radius:12px;border:2px solid #00ff00;background:#181f1b;color:#fff;">
                                </div>
                                <div style="flex:1;min-width:240px;">
                                    <label style="color:#00ff00;font-weight:700;margin-bottom:8px;display:block;font-size:1.08rem;">LinkedIn</label>
                                    <input id="linkLI" type="url" placeholder="https://linkedin.com/..." style="width:100%;padding:15px 16px;border-radius:12px;border:2px solid #00ff00;background:#181f1b;color:#fff;">
                                </div>
                            </div>
                            <div style="margin-bottom:14px;">
                                <label style="color:#00ff00;font-weight:700;margin-bottom:8px;display:block;font-size:1.08rem;">Agenda</label>
                                <div id="agendaList"></div>
                                <button type="button" id="addAgendaItemBtn" style="margin-top:8px;padding:10px 16px;border-radius:10px;border:2px solid #00ff00;background:#111;color:#00ff00;cursor:pointer;">+ Dodaj punkt agendy</button>
                            </div>
                            <div style="margin-bottom:14px;">
                                <label style="color:#00ff00;font-weight:700;margin-bottom:8px;display:block;font-size:1.08rem;">Materiały/zasoby</label>
                                <div id="materialsList"></div>
                                <button type="button" id="addMaterialBtn" style="margin-top:8px;padding:10px 16px;border-radius:10px;border:2px solid #00ff00;background:#111;color:#00ff00;cursor:pointer;">+ Dodaj materiał/link</button>
                            </div>
                            <div style="display:flex;gap:18px;margin-bottom:14px;flex-wrap:wrap;">
                                <div style="flex:1;min-width:260px;">
                                    <label style="color:#00ff00;font-weight:700;margin-bottom:8px;display:block;font-size:1.08rem;">Wymagania wstępne</label>
                                    <input id="wymagania" type="text" placeholder="np. podstawy języka, laptop" style="width:100%;padding:15px 16px;border-radius:12px;border:2px solid #00ff00;background:#181f1b;color:#fff;">
                                </div>
                                <div style="flex:1;min-width:260px;">
                                    <label style="color:#00ff00;font-weight:700;margin-bottom:8px;display:block;font-size:1.08rem;">Certyfikat</label>
                                    <input id="certyfikatInfo" type="text" placeholder="np. Certyfikat uczestnictwa" style="width:100%;padding:15px 16px;border-radius:12px;border:2px solid #00ff00;background:#181f1b;color:#fff;">
                                </div>
                            </div>
                            <div style="margin-bottom:14px;">
                                <label style="color:#00ff00;font-weight:700;margin-bottom:8px;display:block;font-size:1.08rem;">Tagi (po przecinku)</label>
                                <input id="tagiSzkolenia" type="text" placeholder="np. js, backend, devops" style="width:100%;padding:15px 16px;border-radius:12px;border:2px solid #00ff00;background:#181f1b;color:#fff;">
                            </div>
                            <div style="margin-bottom:14px;">
                                <label style="color:#00ff00;font-weight:700;margin-bottom:8px;display:block;font-size:1.08rem;">Szczegóły</label>
                                <input type="text" name="szczegoly" placeholder="np. certyfikat, materiały, lunch" style="width:100%;padding:15px 16px;margin-bottom:0;border-radius:12px;border:2px solid #00ff00;background:#181f1b;color:#fff;font-size:1.13rem;outline:none;box-sizing:border-box;">
                            </div>
                            <button type="submit" style="width:100%;background:linear-gradient(90deg,#00ff00,#00fff7);color:#111;font-weight:bold;padding:18px 0;border:none;border-radius:14px;font-size:1.25rem;cursor:pointer;box-shadow:0 2px 18px #00ff0033;letter-spacing:1px;transition:background 0.2s,transform 0.2s;margin-top:8px;">Dodaj szkolenie</button>
                        </form>
                    </div>
                </div>
                <!-- Modal edycji szkolenia -->
                <div id="editSzkolenieModal" style="display:none;position:fixed;z-index:10001;left:0;top:0;width:100vw;height:100vh;background:rgba(0,0,0,0.65);align-items:center;justify-content:center;overflow:auto;">
                    <div style="background:rgba(20,28,22,0.98);max-width:500px;width:95vw;max-height:90vh;overflow-y:auto;padding:64px 28px 38px 28px;border-radius:22px;box-shadow:0 12px 48px #00ff0033;position:relative;border:2.5px solid #00ff00;margin:40px auto 40px auto;">
                        <button id="closeEditSzkolenieModal" type="button" style="position:absolute;top:24px;right:24px;background:none;border:none;font-size:2.7rem;line-height:1;color:#00ff00;cursor:pointer;transition:color 0.2s;z-index:2;font-weight:bold;">&times;</button>
                        <h3 style="color:#00ff00;text-align:center;margin-bottom:28px;font-size:2rem;letter-spacing:1px;font-weight:900;text-shadow:0 0 18px #00ff00;">Edytuj szkolenie</h3>
                        <form id="editSzkolenieForm" autocomplete="off" style="display:flex;flex-direction:column;gap:20px;">
                            <input type="hidden" id="editSzkolenieId" />
                            <div style="margin-bottom:14px;">
                                <label style="color:#00ff00;font-weight:700;margin-bottom:8px;display:block;font-size:1.08rem;">Tytuł szkolenia*</label>
                                <input type="text" id="editTytulInput" required style="width:100%;padding:15px 16px;margin-bottom:0;border-radius:12px;border:2px solid #00ff00;background:#181f1b;color:#fff;font-size:1.13rem;outline:none;transition:border 0.2s;box-sizing:border-box;">
                                <div id="editTytulError" style="color:#ff4444;font-size:0.98rem;margin-top:4px;display:none;"></div>
                            </div>
                            <div style="display:flex;gap:18px;margin-bottom:14px;flex-wrap:wrap;">
                                <div style="flex:1;">
                                    <label style="color:#00ff00;font-weight:700;margin-bottom:8px;display:block;font-size:1.08rem;">Typ ogłoszenia</label>
                                    <select id="editTypSzkoleniaSelect" style="width:100%;padding:15px 16px;margin-bottom:0;border-radius:12px;border:2px solid #00ff00;background:#181f1b;color:#fff;font-size:1.13rem;outline:none;box-sizing:border-box;">
                                        <option value="Darmowe">Ogłoszenie bezpłatne</option>
                                        <option value="Płatne">Ogłoszenie płatne</option>
                                    </select>
                                </div>
                                <div style="flex:1;">
                                    <label style="color:#00ff00;font-weight:700;margin-bottom:8px;display:block;font-size:1.08rem;">Cena</label>
                                    <select id="editCenaSzkoleniaSelect" style="width:100%;padding:15px 16px;margin-bottom:0;border-radius:12px;border:2px solid #00ff00;background:#181f1b;color:#fff;font-size:1.13rem;outline:none;box-sizing:border-box;">
                                        <option value="0">Bezpłatne</option>
                                        <option value="49.99">49,99 zł (płatne)</option>
                                    </select>
                                </div>
                                <div style="flex:1;min-width:240px;">
                                    <label style="color:#00ff00;font-weight:700;margin-bottom:8px;display:block;font-size:1.08rem;">Tryb realizacji</label>
                                    <select id="editTrybRealizacji" style="width:100%;padding:15px 16px;border-radius:12px;border:2px solid #00ff00;background:#181f1b;color:#fff;">
                                        <option>Online</option>
                                        <option>Stacjonarne</option>
                                        <option>Hybrydowe</option>
                                    </select>
                                </div>
                                <div style="flex:1;min-width:240px;">
                                    <label style="color:#00ff00;font-weight:700;margin-bottom:8px;display:block;font-size:1.08rem;">Język szkolenia</label>
                                    <input id="editJezykSzkolenia" type="text" placeholder="np. Polski, English" style="width:100%;padding:15px 16px;border-radius:12px;border:2px solid #00ff00;background:#181f1b;color:#fff;">
                                </div>
                            </div>
                            <div style="display:flex;gap:18px;margin-bottom:14px;flex-wrap:wrap;">
                                <div style="flex:1;">
                                    <label style="color:#00ff00;font-weight:700;margin-bottom:8px;display:block;font-size:1.08rem;">Lokalizacja*</label>
                                    <input type="text" id="editLokalizacjaInput" required placeholder="np. Online, Warszawa" style="width:100%;padding:15px 16px;margin-bottom:0;border-radius:12px;border:2px solid #00ff00;background:#181f1b;color:#fff;font-size:1.13rem;outline:none;box-sizing:border-box;">
                                    <div id="editLokalizacjaError" style="color:#ff4444;font-size:0.98rem;margin-top:4px;display:none;"></div>
                                </div>
                                <div style="flex:1;">
                                    <label style="color:#00ff00;font-weight:700;margin-bottom:8px;display:block;font-size:1.08rem;">Termin*</label>
                                    <input type="datetime-local" id="editTerminInput" required style="width:100%;padding:15px 16px;margin-bottom:0;border-radius:12px;border:2px solid #00ff00;background:#181f1b;color:#fff;font-size:1.13rem;outline:none;box-sizing:border-box;">
                                    <div id="editTerminError" style="color:#ff4444;font-size:0.98rem;margin-top:4px;display:none;"></div>
                                </div>
                                <div style="flex:1;min-width:220px;">
                                    <label style="color:#00ff00;font-weight:700;margin-bottom:8px;display:block;font-size:1.08rem;">Czas trwania</label>
                                    <div style="display:flex;gap:10px;align-items:center;">
                                        <input id="editCzasTrwania" type="number" min="1" placeholder="np. 8" style="flex:1;padding:15px 16px;border-radius:12px;border:2px solid #00ff00;background:#181f1b;color:#fff;">
                                        <select id="editJednostkaCzasu" style="padding:12px 14px;border-radius:12px;border:2px solid #00ff00;background:#181f1b;color:#fff;">
                                            <option>godz.</option>
                                            <option>dni</option>
                                        </select>
                                    </div>
                                </div>
                                <div style="flex:1;min-width:220px;">
                                    <label style="color:#00ff00;font-weight:700;margin-bottom:8px;display:block;font-size:1.08rem;">Liczba miejsc</label>
                                    <input id="editLiczbaMiejsc" type="number" min="1" placeholder="np. 20" style="width:100%;padding:15px 16px;border-radius:12px;border:2px solid #00ff00;background:#181f1b;color:#fff;">
                                </div>
                            </div>
                            <div style="margin-bottom:14px;">
                                <label style="color:#00ff00;font-weight:700;margin-bottom:8px;display:block;font-size:1.08rem;">Opis*</label>
                                <textarea id="editOpisInput" required style="width:100%;padding:15px 16px;margin-bottom:0;border-radius:12px;border:2px solid #00ff00;background:#181f1b;color:#fff;font-size:1.13rem;min-height:80px;outline:none;box-sizing:border-box;"></textarea>
                                <div id="editOpisError" style="color:#ff4444;font-size:0.98rem;margin-top:4px;display:none;"></div>
                            </div>
                            <div style="display:flex;gap:18px;margin-bottom:14px;flex-wrap:wrap;">
                                <div style="flex:1;min-width:240px;">
                                    <label style="color:#00ff00;font-weight:700;margin-bottom:8px;display:block;font-size:1.08rem;">Cena szkolenia</label>
                                    <div style="display:flex;gap:10px;align-items:center;">
                                        <input id="editCenaKursu" type="number" min="0" step="0.01" placeholder="np. 499.00" style="flex:1;padding:15px 16px;border-radius:12px;border:2px solid #00ff00;background:#181f1b;color:#fff;">
                                        <select id="editWalutaKursu" style="padding:12px 14px;border-radius:12px;border:2px solid #00ff00;background:#181f1b;color:#fff;">
                                            <option>PLN</option>
                                            <option>EUR</option>
                                        </select>
                                    </div>
                                </div>
                                <div style="flex:1;min-width:240px;">
                                    <label style="color:#00ff00;font-weight:700;margin-bottom:8px;display:block;font-size:1.08rem;">Poziom</label>
                                    <select id="editPoziomKursu" style="width:100%;padding:15px 16px;border-radius:12px;border:2px solid #00ff00;background:#181f1b;color:#fff;">
                                        <option>Podstawowy</option>
                                        <option>Średniozaawansowany</option>
                                        <option>Zaawansowany</option>
                                    </select>
                                </div>
                                <div style="flex:1;min-width:240px;">
                                    <label style="color:#00ff00;font-weight:700;margin-bottom:8px;display:block;font-size:1.08rem;">Organizator</label>
                                    <input id="editOrganizator" type="text" placeholder="Nazwa organizatora" style="width:100%;padding:15px 16px;border-radius:12px;border:2px solid #00ff00;background:#181f1b;color:#fff;">
                                </div>
                            </div>
                            <div style="margin-bottom:14px;">
                                <label style="color:#00ff00;font-weight:700;margin-bottom:8px;display:block;font-size:1.08rem;">Prowadzący</label>
                                <div id="editTrainersList"></div>
                                <button type="button" id="addEditTrainerBtn" style="margin-top:8px;padding:10px 16px;border-radius:10px;border:2px solid #00ff00;background:#111;color:#00ff00;cursor:pointer;">+ Dodaj prowadzącego</button>
                            </div>
                            <div style="display:flex;gap:18px;margin-bottom:14px;flex-wrap:wrap;">
                                <div style="flex:1;min-width:260px;">
                                    <label style="color:#00ff00;font-weight:700;margin-bottom:8px;display:block;font-size:1.08rem;">Kontakt e-mail</label>
                                    <input id="editKontaktEmail" type="email" placeholder="np. szkolenia@twojadomena.pl" style="width:100%;padding:15px 16px;border-radius:12px;border:2px solid #00ff00;background:#181f1b;color:#fff;">
                                </div>
                                <div style="flex:1;min-width:220px;">
                                    <label style="color:#00ff00;font-weight:700;margin-bottom:8px;display:block;font-size:1.08rem;">Kontakt telefon</label>
                                    <input id="editKontaktTel" type="tel" placeholder="np. +48 123 456 789" style="width:100%;padding:15px 16px;border-radius:12px;border:2px solid #00ff00;background:#181f1b;color:#fff;">
                                </div>
                            </div>
                            <div style="display:flex;gap:18px;margin-bottom:14px;flex-wrap:wrap;">
                                <div style="flex:1;min-width:240px;">
                                    <label style="color:#00ff00;font-weight:700;margin-bottom:8px;display:block;font-size:1.08rem;">Strona WWW</label>
                                    <input id="editLinkWWW" type="url" placeholder="https://..." style="width:100%;padding:15px 16px;border-radius:12px;border:2px solid #00ff00;background:#181f1b;color:#fff;">
                                </div>
                                <div style="flex:1;min-width:240px;">
                                    <label style="color:#00ff00;font-weight:700;margin-bottom:8px;display:block;font-size:1.08rem;">Wydarzenie na FB</label>
                                    <input id="editLinkFB" type="url" placeholder="https://facebook.com/..." style="width:100%;padding:15px 16px;border-radius:12px;border:2px solid #00ff00;background:#181f1b;color:#fff;">
                                </div>
                                <div style="flex:1;min-width:240px;">
                                    <label style="color:#00ff00;font-weight:700;margin-bottom:8px;display:block;font-size:1.08rem;">LinkedIn</label>
                                    <input id="editLinkLI" type="url" placeholder="https://linkedin.com/..." style="width:100%;padding:15px 16px;border-radius:12px;border:2px solid #00ff00;background:#181f1b;color:#fff;">
                                </div>
                            </div>
                            <div style="margin-bottom:14px;">
                                <label style="color:#00ff00;font-weight:700;margin-bottom:8px;display:block;font-size:1.08rem;">Agenda</label>
                                <div id="editAgendaList"></div>
                                <button type="button" id="addEditAgendaItemBtn" style="margin-top:8px;padding:10px 16px;border-radius:10px;border:2px solid #00ff00;background:#111;color:#00ff00;cursor:pointer;">+ Dodaj punkt agendy</button>
                            </div>
                            <div style="margin-bottom:14px;">
                                <label style="color:#00ff00;font-weight:700;margin-bottom:8px;display:block;font-size:1.08rem;">Materiały/zasoby</label>
                                <div id="editMaterialsList"></div>
                                <button type="button" id="addEditMaterialBtn" style="margin-top:8px;padding:10px 16px;border-radius:10px;border:2px solid #00ff00;background:#111;color:#00ff00;cursor:pointer;">+ Dodaj materiał/link</button>
                            </div>
                            <div style="display:flex;gap:18px;margin-bottom:14px;flex-wrap:wrap;">
                                <div style="flex:1;min-width:260px;">
                                    <label style="color:#00ff00;font-weight:700;margin-bottom:8px;display:block;font-size:1.08rem;">Wymagania wstępne</label>
                                    <input id="editWymagania" type="text" placeholder="np. podstawy języka, laptop" style="width:100%;padding:15px 16px;border-radius:12px;border:2px solid #00ff00;background:#181f1b;color:#fff;">
                                </div>
                                <div style="flex:1;min-width:260px;">
                                    <label style="color:#00ff00;font-weight:700;margin-bottom:8px;display:block;font-size:1.08rem;">Certyfikat</label>
                                    <input id="editCertyfikatInfo" type="text" placeholder="np. Certyfikat uczestnictwa" style="width:100%;padding:15px 16px;border-radius:12px;border:2px solid #00ff00;background:#181f1b;color:#fff;">
                                </div>
                            </div>
                            <div style="margin-bottom:14px;">
                                <label style="color:#00ff00;font-weight:700;margin-bottom:8px;display:block;font-size:1.08rem;">Tagi (po przecinku)</label>
                                <input id="editTagiSzkolenia" type="text" placeholder="np. js, backend, devops" style="width:100%;padding:15px 16px;border-radius:12px;border:2px solid #00ff00;background:#181f1b;color:#fff;">
                            </div>
                            <div style="margin-bottom:14px;">
                                <label style="color:#00ff00;font-weight:700;margin-bottom:8px;display:block;font-size:1.08rem;">Szczegóły</label>
                                <input type="text" id="editSzczegoly" placeholder="np. certyfikat, materiały, lunch" style="width:100%;padding:15px 16px;margin-bottom:0;border-radius:12px;border:2px solid #00ff00;background:#181f1b;color:#fff;font-size:1.13rem;outline:none;box-sizing:border-box;">
                            </div>
                            <button type="submit" style="width:100%;background:linear-gradient(90deg,#00ff00,#00fff7);color:#111;font-weight:bold;padding:18px 0;border:none;border-radius:14px;font-size:1.25rem;cursor:pointer;box-shadow:0 2px 18px #00ff0033;letter-spacing:1px;transition:background 0.2s,transform 0.2s;margin-top:8px;">Zapisz zmiany</button>
                        </form>
                    </div>
                </div>
        </div>
        <section class="search-section">
            <form id="szkolenieSearchForm" class="search-form" autocomplete="off">
                <div class="form-group">
                    <label for="szkolenieSearchInput">Słowo kluczowe</label>
                    <input type="text" id="szkolenieSearchInput" placeholder="np. Python, Excel, marketing">
                </div>
                <div class="form-group">
                    <label for="szkolenieLocationInput">Lokalizacja</label>
                    <input type="text" id="szkolenieLocationInput" placeholder="np. Warszawa, Online">
                </div>
                <div class="form-group">
                    <label for="szkolenieDateInput">Termin</label>
                    <input type="date" id="szkolenieDateInput">
                </div>
                <button type="submit" class="search-btn">Szukaj</button>
            </form>
        </section>
        <div id="szkolenieCardsContainer">
            <div class="loading">
                <div class="spinner"></div>
                Ładowanie szkoleń...
            </div>
        </div>
        <div id="pagination-info" style="display: none; text-align: center; margin: 20px 0; padding: 15px; background: rgba(0,255,0,0.1); border: 1px solid #00ff00; border-radius: 10px; color: #00ff00; font-weight: bold;">
            <div style="font-size: 1.1rem; margin-bottom: 5px;">
              📊 <span id="pagination-current-range"></span>
            </div>
            <div style="font-size: 0.9rem; color: #FFD700;">
              💡 Wskazówka: Użyj Ctrl + strzałki do szybkiej nawigacji
            </div>
        </div>
        <div class="pagination-bar" id="pagination-bar" style="display: none;"></div>
    </main>
    <script>
// --- ZMIENNE GLOBALNE I DEMO DANE ---
var currentPage = 1;
var szkoleniaPerPage = parseInt(localStorage.getItem('szkoleniaPerPage'), 10) || 10;
var nextSzkolenieId = 1;
function ensureDemoSzkolenia() {
    if (typeof window.allSzkolenia === 'undefined') window.allSzkolenia = [];
    if (!Array.isArray(window.allSzkolenia)) window.allSzkolenia = [];
    if (window.allSzkolenia.length === 0) {
        const miasta = ['Warszawa', 'Kraków', 'Gdańsk', 'Poznań', 'Wrocław', 'Łódź', 'Katowice', 'Online', 'Zdalnie'];
        const tematy = ['JavaScript', 'Python', 'Excel', 'Marketing', 'Projektowanie', 'Zarządzanie', 'Finanse', 'IT', 'Sprzedaż', 'HR'];
        for (let i = 1; i <= 149; i++) {
            const tytul = `Szkolenie ${tematy[Math.floor(Math.random() * tematy.length)]} ${i}`;
            const lokalizacja = miasta[Math.floor(Math.random() * miasta.length)];
            // Bez padStart dla kompatybilności: ręczne formatowanie dwucyfrowe
            var m = Math.floor(Math.random() * 12) + 1; var d = Math.floor(Math.random() * 28) + 1; var h = Math.floor(Math.random() * 24);
            function two(n){ n = String(n); return (n.length < 2 ? ('0' + n) : n); }
            const termin = '2025-' + two(m) + '-' + two(d) + 'T' + two(h) + ':00';
            const typ = Math.random() > 0.5 ? 'Darmowe' : 'Płatne';
            const cena = typ === 'Płatne' ? (Math.floor(Math.random() * 200) + 20) + '.99' : '0';
            const opis = `Opis szkolenia ${i}. ${typ === 'Darmowe' ? 'Darmowe szkolenie' : `Płatne za ${cena} zł`}.`;
            // Losowa data utworzenia z ostatnich 7 dni, do statystyki "Nowych dzisiaj"
            var createdShift = Math.floor(Math.random() * 7);
            var createdDate = new Date();
            createdDate.setHours(0,0,0,0);
            createdDate.setDate(createdDate.getDate() - createdShift);
            var createdAt = createdDate.toISOString().slice(0,10);
            window.allSzkolenia.push({ id: i, tytul, lokalizacja, termin, typ, cena, opis });
            // dołóż createdAt bez naruszania istniejącego kształtu obiektu
            var last = window.allSzkolenia[window.allSzkolenia.length - 1];
            last.createdAt = createdAt;
        }
        nextSzkolenieId = 150;
    } else {
        try {
            const maxId = window.allSzkolenia.reduce((max, s) => Math.max(max, s.id || 0), 0);
            nextSzkolenieId = Math.max(1, maxId + 1);
        } catch(_) {}
    }
    if (typeof window.filteredSzkolenia === 'undefined') {
        window.filteredSzkolenia = window.allSzkolenia.slice();
    }
}
// Upewnij się, że mamy dane demo jak nie dostarczono innych
ensureDemoSzkolenia();
// Aliasuj globalne tablice do zmiennych używanych w kodzie poniżej
var allSzkolenia = window.allSzkolenia;
var filteredSzkolenia = Array.isArray(window.filteredSzkolenia) ? window.filteredSzkolenia.slice() : allSzkolenia.slice();
// Wyświetl szkolenia od razu po załadowaniu strony (z retry i diagnostyką)
window.addEventListener('error', function(ev) {
    try {
        const box = document.createElement('div');
        box.style.cssText = 'position:fixed;bottom:10px;right:10px;z-index:100000;background:rgba(255,0,0,0.9);color:#fff;padding:10px 14px;border-radius:8px;max-width:60vw;font-size:12px;box-shadow:0 2px 12px rgba(255,0,0,0.5)';
        box.textContent = 'Błąd JS: ' + (ev && ev.message ? ev.message : 'nieznany');
        document.body.appendChild(box);
        setTimeout(() => box.remove(), 6000);
    } catch (_) {}
});
document.addEventListener('DOMContentLoaded', function() {
    try {
        ensureDemoSzkolenia();
        displaySzkolenia();
        updateStatsCards();
        // Bezpieczny retry, gdyby coś wstrzymało pierwszy render
        setTimeout(() => { try { displaySzkolenia(); updateStatsCards(); } catch (e) {} }, 150);
        setTimeout(() => { try { displaySzkolenia(); updateStatsCards(); } catch (e) {} }, 600);
    } catch (e) {
        // wyświetl komunikat o błędzie w kontenerze
        const container = document.getElementById('szkolenieCardsContainer');
        if (container) {
            container.innerHTML = `<div style="text-align:center;color:#ff6666;padding:24px;">Błąd inicjalizacji listy szkoleń.<br>${(e && e.message) || e}</div>`;
        }
        console.error('Init error (szkolenia):', e);
    }
});
// --- KONIEC DEMO DANYCH ---
        // Obsługa modala, X, płatności i walidacji formularza
        document.addEventListener('DOMContentLoaded', function() {
            // Pobierz elementy
            var openBtn = document.getElementById('openAddSzkolenieModal');
            var closeBtn = document.getElementById('closeAddSzkolenieModal');
            var modal = document.getElementById('addSzkolenieModal');
            var typSelect = document.getElementById('typSzkoleniaSelect');
            var platneInfo = document.getElementById('platneInfoBox');
            var payBtn = document.getElementById('pay49Btn');
            var form = document.getElementById('addSzkolenieForm');
            var tytul = document.getElementById('tytulInput');
            var lokalizacja = document.getElementById('lokalizacjaInput');
            var termin = document.getElementById('terminInput');
            var opis = document.getElementById('opisInput');
            var tytulError = document.getElementById('tytulError');
            var lokalizacjaError = document.getElementById('lokalizacjaError');
            var terminError = document.getElementById('terminError');
            var opisError = document.getElementById('opisError');

            // Dynamiczne listy (formularz dodawania)
            const trainersList = document.getElementById('trainersList');
            const addTrainerBtn = document.getElementById('addTrainerBtn');
            const agendaList = document.getElementById('agendaList');
            const addAgendaItemBtn = document.getElementById('addAgendaItemBtn');
            const materialsList = document.getElementById('materialsList');
            const addMaterialBtn = document.getElementById('addMaterialBtn');
            function addTrainerRow(name = '', bio = '') {
                const row = document.createElement('div');
                row.style.display = 'grid';
                row.style.gridTemplateColumns = '1fr 1fr auto';
                row.style.gap = '10px';
                row.style.marginBottom = '8px';
                row.innerHTML = `
                    <input class="trainer-name" type="text" placeholder="Imię i nazwisko" value="${name}" style="padding:12px 14px;border-radius:10px;border:2px solid #00ff00;background:#181f1b;color:#fff;"/>
                    <input class="trainer-bio" type="text" placeholder="Specjalizacja / bio" value="${bio}" style="padding:12px 14px;border-radius:10px;border:2px solid #00ff00;background:#181f1b;color:#fff;"/>
                    <button type="button" class="remove-row" style="padding:10px 12px;border-radius:10px;border:2px solid #ff4444;background:#2a1515;color:#ff8888;cursor:pointer;">Usuń</button>
                `;
                row.querySelector('.remove-row').addEventListener('click', () => row.remove());
                trainersList && trainersList.appendChild(row);
            }
            function addAgendaRow(text = '') {
                const row = document.createElement('div');
                row.style.display = 'grid';
                row.style.gridTemplateColumns = '1fr auto';
                row.style.gap = '10px';
                row.style.marginBottom = '8px';
                row.innerHTML = `
                    <input class="agenda-text" type="text" placeholder="Punkt agendy" value="${text}" style="padding:12px 14px;border-radius:10px;border:2px solid #00ff00;background:#181f1b;color:#fff;"/>
                    <button type="button" class="remove-row" style="padding:10px 12px;border-radius:10px;border:2px solid #ff4444;background:#2a1515;color:#ff8888;cursor:pointer;">Usuń</button>
                `;
                row.querySelector('.remove-row').addEventListener('click', () => row.remove());
                agendaList && agendaList.appendChild(row);
            }
            function addMaterialRow(label = '', url = '') {
                const row = document.createElement('div');
                row.style.display = 'grid';
                row.style.gridTemplateColumns = '1fr 1fr auto';
                row.style.gap = '10px';
                row.style.marginBottom = '8px';
                row.innerHTML = `
                    <input class="material-label" type="text" placeholder="Nazwa materiału" value="${label}" style="padding:12px 14px;border-radius:10px;border:2px solid #00ff00;background:#181f1b;color:#fff;"/>
                    <input class="material-url" type="url" placeholder="https://link-do-materialu" value="${url}" style="padding:12px 14px;border-radius:10px;border:2px solid #00ff00;background:#181f1b;color:#fff;"/>
                    <button type="button" class="remove-row" style="padding:10px 12px;border-radius:10px;border:2px solid #ff4444;background:#2a1515;color:#ff8888;cursor:pointer;">Usuń</button>
                `;
                row.querySelector('.remove-row').addEventListener('click', () => row.remove());
                materialsList && materialsList.appendChild(row);
            }
            if (addTrainerBtn) addTrainerBtn.addEventListener('click', () => addTrainerRow());
            if (addAgendaItemBtn) addAgendaItemBtn.addEventListener('click', () => addAgendaRow());
            if (addMaterialBtn) addMaterialBtn.addEventListener('click', () => addMaterialRow());
            // wstępne wiersze
            if (trainersList && trainersList.children.length === 0) addTrainerRow();
            if (agendaList && agendaList.children.length === 0) addAgendaRow();
            if (materialsList && materialsList.children.length === 0) addMaterialRow('Prezentacja PDF','');

            

            // Otwieranie modala i reset sekcji płatności
            if(openBtn && modal && typSelect && platneInfo){
                openBtn.onclick = function() {
                    modal.style.display = 'flex';
                    typSelect.value = 'Darmowe';
                    platneInfo.style.display = 'none';
                };
                // Delegowany fallback, gdyby bezpośrednie zdarzenie nie podpięło się
                document.addEventListener('click', function(ev){
                    const target = ev.target;
                    if (target && target.id === 'openAddSzkolenieModal') {
                        modal.style.display = 'flex';
                        typSelect.value = 'Darmowe';
                        platneInfo.style.display = 'none';
                    }
                });
            }
            // X zamykający modal
            if(closeBtn && modal){
                closeBtn.onclick = function() {
                    modal.style.display = 'none';
                };
            }
            // Pokaż sekcję płatności tylko dla płatnych
            if(typSelect && platneInfo){
                typSelect.addEventListener('change', function(){
                    if(this.value === 'Płatne'){
                        platneInfo.style.display = 'block';
                    } else {
                        platneInfo.style.display = 'none';
                    }
                });
            }
            // Obsługa kliknięcia przycisku płatności (tu tylko alert)
            if(payBtn){
                payBtn.onclick = function(){
                    alert('Przekierowanie do płatności 49,99 zł. (Integracja płatności do wdrożenia)');
                };
            }
            // Walidacja + dodawanie nowego szkolenia (pojedynczy handler)
            if(form) {
                form.addEventListener('submit', function(e) {
                    e.preventDefault();
                    var valid = true;
                    // Tytuł
                    if(!tytul.value.trim()) {
                        tytul.style.borderColor = '#ff4444';
                        tytulError.textContent = 'Podaj tytuł szkolenia.';
                        tytulError.style.display = 'block';
                        valid = false;
                    } else {
                        tytul.style.borderColor = '#00ff00';
                        tytulError.style.display = 'none';
                    }
                    // Lokalizacja
                    if(!lokalizacja.value.trim()) {
                        lokalizacja.style.borderColor = '#ff4444';
                        lokalizacjaError.textContent = 'Podaj lokalizację.';
                        lokalizacjaError.style.display = 'block';
                        valid = false;
                    } else {
                        lokalizacja.style.borderColor = '#00ff00';
                        lokalizacjaError.style.display = 'none';
                    }
                    // Termin
                    if(!termin.value) {
                        termin.style.borderColor = '#ff4444';
                        terminError.textContent = 'Podaj termin szkolenia.';
                        terminError.style.display = 'block';
                        valid = false;
                    } else {
                        termin.style.borderColor = '#00ff00';
                        terminError.style.display = 'none';
                    }
                    // Opis
                    if(!opis.value.trim()) {
                        opis.style.borderColor = '#ff4444';
                        opisError.textContent = 'Podaj opis szkolenia.';
                        opisError.style.display = 'block';
                        valid = false;
                    } else {
                        opis.style.borderColor = '#00ff00';
                        opisError.style.display = 'none';
                    }
                    if(!valid) return;

                    // Zbieranie pól
                    var _el;
                    const tryb = (((_el = document.getElementById('trybRealizacji')) && _el.value) || '').trim();
                    const jezyk = (((_el = document.getElementById('jezykSzkolenia')) && _el.value) || '').trim();
                    const czasTrwania = (((_el = document.getElementById('czasTrwania')) && _el.value) || '').trim();
                    const jednostkaCzasu = (((_el = document.getElementById('jednostkaCzasu')) && _el.value) || '').trim();
                    const liczbaMiejsc = (((_el = document.getElementById('liczbaMiejsc')) && _el.value) || '').trim();
                    const cenaKursu = (((_el = document.getElementById('cenaKursu')) && _el.value) || '').trim();
                    const walutaKursu = (((_el = document.getElementById('walutaKursu')) && _el.value) || '').trim();
                    const poziomKursu = (((_el = document.getElementById('poziomKursu')) && _el.value) || '').trim();
                    const organizator = (((_el = document.getElementById('organizator')) && _el.value) || '').trim();
                    const kontaktEmail = (((_el = document.getElementById('kontaktEmail')) && _el.value) || '').trim();
                    const kontaktTel = (((_el = document.getElementById('kontaktTel')) && _el.value) || '').trim();
                    const linkWWW = (((_el = document.getElementById('linkWWW')) && _el.value) || '').trim();
                    const linkFB = (((_el = document.getElementById('linkFB')) && _el.value) || '').trim();
                    const linkLI = (((_el = document.getElementById('linkLI')) && _el.value) || '').trim();
                    const wymagania = (((_el = document.getElementById('wymagania')) && _el.value) || '').trim();
                    const certyfikatInfo = (((_el = document.getElementById('certyfikatInfo')) && _el.value) || '').trim();
                    const tagiStr = (((_el = document.getElementById('tagiSzkolenia')) && _el.value) || '').trim();
                    const tagi = tagiStr ? tagiStr.split(',').map(s => s.trim()).filter(Boolean) : [];
                    var __el;
                    const typOg = (((__el = document.getElementById('typSzkoleniaSelect')) && __el.value) || 'Darmowe');
                    const cenaPublikacji = parseFloat((((__el = document.getElementById('cenaSzkoleniaSelect')) && __el.value) || '0')) || 0;
                    const trenerzy = Array.from(document.querySelectorAll('#trainersList .trainer-name')).map(function(inp, i){
                        var bios = document.querySelectorAll('#trainersList .trainer-bio');
                        var bioVal = bios && bios[i] ? bios[i].value : '';
                        return { name: inp.value.trim(), bio: bioVal.trim() };
                    }).filter(function(t){ return t.name; });
                    const agenda = Array.from(document.querySelectorAll('#agendaList .agenda-text')).map(function(inp){ return inp.value.trim(); }).filter(Boolean);
                    const materialy = Array.from(document.querySelectorAll('#materialsList div')).map(function(row){
                        var ml = row.querySelector('.material-label');
                        var mu = row.querySelector('.material-url');
                        return {
                            label: (ml && ml.value ? ml.value : '').trim(),
                            url: (mu && mu.value ? mu.value : '').trim()
                        };
                    }).filter(function(m){ return m.label || m.url; });

                    const cenaDoListingu = typOg === 'Płatne' && cenaKursu ? String(parseFloat(cenaKursu).toFixed(2)) : '0';

                    const newSzkolenie = {
                        id: nextSzkolenieId++,
                        tytul: tytul.value.trim(),
                        lokalizacja: lokalizacja.value.trim(),
                        termin: termin.value,
                        opis: opis.value.trim(),
                        typ: typOg,
                        cena: cenaDoListingu,
                        cenaPublikacji,
                        createdAt: (new Date()).toISOString().slice(0,10),
                        tryb, jezyk,
                        czasTrwania: czasTrwania ? `${czasTrwania} ${jednostkaCzasu || ''}`.trim() : '',
                        liczbaMiejsc: liczbaMiejsc ? parseInt(liczbaMiejsc,10) : null,
                        cenaKursu: cenaKursu ? parseFloat(cenaKursu) : null,
                        walutaKursu: walutaKursu || null,
                        poziom: poziomKursu || null,
                        organizator: organizator || null,
                        kontakt: { email: kontaktEmail || null, tel: kontaktTel || null },
                        linki: { www: linkWWW || null, fb: linkFB || null, li: linkLI || null },
                        trenerzy, agenda, materialy,
                        wymagania: wymagania || null,
                        certyfikat: certyfikatInfo || null,
                        tagi
                    };

                    try {
                        window.allSzkolenia = window.allSzkolenia || [];
                        window.allSzkolenia.unshift(newSzkolenie);
                        window.filteredSzkolenia = window.allSzkolenia.slice();
                        allSzkolenia = window.allSzkolenia;
                        filteredSzkolenia = window.filteredSzkolenia.slice();
                        currentPage = 1;
                        displaySzkolenia();
                        updateSzkoleniaCount();
                        updatePaginationInfo();
                        modal.style.display = 'none';
                        form.reset();
                        if (trainersList) trainersList.innerHTML = '';
                        if (agendaList) agendaList.innerHTML = '';
                        if (materialsList) materialsList.innerHTML = '';
                        addTrainerRow();
                        addAgendaRow();
                        addMaterialRow('Prezentacja PDF','');
                        updateStatsCards();
                    } catch(err) {
                        console.error('Błąd przy dodawaniu szkolenia', err);
                        alert('Wystąpił błąd przy dodawaniu szkolenia.');
                    }
                });
            }
            // --- Filtrowanie i sortowanie szkoleń ---
                // Przykładowa struktura danych szkoleń (do podmiany na dynamiczne)
                // let allSzkolenia = [...]; // już istnieje w Twoim kodzie
                // let filteredSzkolenia = [...]; // już istnieje w Twoim kodzie

                const filterLocation = document.getElementById('filterLocation');
                const filterType = document.getElementById('filterType');
                const sortBy = document.getElementById('sortBy');

                function applyFiltersAndSort() {
                    // Załóżmy, że allSzkolenia to tablica obiektów szkolenia
                    filteredSzkolenia = allSzkolenia.filter(s => {
                        const loc = ((filterLocation && filterLocation.value) ? filterLocation.value : '').trim().toLowerCase();
                        const typ = filterType.value;
                        let ok = true;
                        if(loc && !(s.lokalizacja && s.lokalizacja.toLowerCase().includes(loc))) ok = false;
                        if(typ && s.typ !== typ) ok = false;
                        return ok;
                    });
                    // Sortowanie
                    if(sortBy.value === 'dateDesc') {
                        filteredSzkolenia.sort((a,b) => new Date(b.termin) - new Date(a.termin));
                    } else if(sortBy.value === 'dateAsc') {
                        filteredSzkolenia.sort((a,b) => new Date(a.termin) - new Date(b.termin));
                    } else if(sortBy.value === 'priceAsc') {
                        filteredSzkolenia.sort((a,b) => (parseFloat(a.cena)||0) - (parseFloat(b.cena)||0));
                    } else if(sortBy.value === 'priceDesc') {
                        filteredSzkolenia.sort((a,b) => (parseFloat(b.cena)||0) - (parseFloat(a.cena)||0));
                    }
            // Odśwież widok (spójnie z paginacją)
                    currentPage = 1;
                    window.filteredSzkolenia = filteredSzkolenia.slice();
                    displaySzkolenia();
                }

                if(filterLocation) filterLocation.addEventListener('input', applyFiltersAndSort);
                if(filterType) filterType.addEventListener('change', applyFiltersAndSort);
                if(sortBy) sortBy.addEventListener('change', applyFiltersAndSort);

                // Wywołaj na starcie, by zastosować domyślne filtry/sortowanie (po upewnieniu się, że są dane)
                try { ensureDemoSzkolenia(); } catch(_) {}
                applyFiltersAndSort();
            // --- koniec filtrowania/sortowania ---
        });
        // Pomocnicze funkcje statystyk
        function todayStr() { return (new Date()).toISOString().slice(0,10); }
        function countActiveSzkolenia(arr) {
            // Na życzenie: "Aktywnych" = wszystkie szkolenia załadowane (bez wygaszania po terminie)
            return Array.isArray(arr) ? arr.length : 0;
        }
        function countNewToday(arr){
            var tStr = todayStr();
            var c = 0;
            for (var i=0;i<arr.length;i++){
                var s = arr[i] || {};
                if (s.createdAt && String(s.createdAt).slice(0,10) === tStr) c++;
            }
            return c;
        }
        function countOrganizers(arr){
            var set = Object.create(null);
            for (var i=0;i<arr.length;i++){
                var org = (arr[i] && arr[i].organizator) ? String(arr[i].organizator).trim() : '';
                if (org) set[org] = true;
            }
            return Object.keys(set).length;
        }
        function updateStatsCards(){
            try {
                var arr = window.allSzkolenia || [];
                var active = countActiveSzkolenia(arr);
                var fresh = countNewToday(arr);
                var orgs = countOrganizers(arr);
                var elA = document.getElementById('statActiveSzkolenia');
                var elN = document.getElementById('statNewToday');
                var elO = document.getElementById('statWykonawcy');
                if (elA) elA.textContent = String(active);
                if (elN) elN.textContent = String(fresh);
                if (elO) elO.textContent = String(orgs);
            } catch(_) {}
        }
            function renderPaginationBar() {
                const bar = document.getElementById('pagination-bar');
                const total = filteredSzkolenia.length;
                const totalPages = Math.ceil(total / szkoleniaPerPage);
                if (totalPages <= 1) {
                    bar.style.display = 'none';
                    bar.innerHTML = '';
                    return;
                }
                bar.style.display = 'flex';
                bar.innerHTML = '';
                // Przycisk poprzednia strona
                const prevBtn = document.createElement('button');
                prevBtn.className = 'pagination-btn pagination-navigation-btn';
                prevBtn.innerHTML = '⏮️';
                prevBtn.disabled = currentPage === 1;
                prevBtn.setAttribute('aria-label', 'Poprzednia strona');
                prevBtn.onclick = function() {
                    if (currentPage > 1) {
                        currentPage--;
                        displaySzkolenia();
                        window.scrollTo({ top: bar.offsetTop - 120, behavior: 'smooth' });
                    }
                };
                addRippleEffect(prevBtn);
                bar.appendChild(prevBtn);
                // Szybka nawigacja: pierwsza strona
                if (currentPage > 3) {
                    const firstBtn = document.createElement('button');
                    firstBtn.className = 'pagination-btn';
                    firstBtn.textContent = '1';
                    firstBtn.setAttribute('data-page', '1');
                    firstBtn.onclick = function() {
                        currentPage = 1;
                        displaySzkolenia();
                        window.scrollTo({ top: bar.offsetTop - 120, behavior: 'smooth' });
                    };
                    addRippleEffect(firstBtn);
                    bar.appendChild(firstBtn);
                    if (currentPage > 4) {
                        const sep = document.createElement('span');
                        sep.className = 'pagination-separator';
                        sep.textContent = '...';
                        bar.appendChild(sep);
                    }
                }
                // Główne numery stron
                for (let i = Math.max(1, currentPage - 2); i <= Math.min(totalPages, currentPage + 2); i++) {
                    const pageBtn = document.createElement('button');
                    pageBtn.className = 'pagination-btn' + (i === currentPage ? ' active' : '');
                    pageBtn.textContent = i;
                    pageBtn.setAttribute('data-page', i);
                    pageBtn.onclick = function() {
                        if (i !== currentPage) {
                            currentPage = i;
                            displaySzkolenia();
                            window.scrollTo({ top: bar.offsetTop - 120, behavior: 'smooth' });
                        }
                    };
                    addRippleEffect(pageBtn);
                    bar.appendChild(pageBtn);
                }
                // Szybka nawigacja: ostatnia strona
                if (currentPage < totalPages - 2) {
                    if (currentPage < totalPages - 3) {
                        const sep = document.createElement('span');
                        sep.className = 'pagination-separator';
                        sep.textContent = '...';
                        bar.appendChild(sep);
                    }
                    const lastBtn = document.createElement('button');
                    lastBtn.className = 'pagination-btn';
                    lastBtn.textContent = totalPages;
                    lastBtn.setAttribute('data-page', totalPages);
                    lastBtn.onclick = function() {
                        currentPage = totalPages;
                        displaySzkolenia();
                        window.scrollTo({ top: bar.offsetTop - 120, behavior: 'smooth' });
                    };
                    addRippleEffect(lastBtn);
                    bar.appendChild(lastBtn);
                }
                // Przycisk następna strona
                const nextBtn = document.createElement('button');
                nextBtn.className = 'pagination-btn pagination-navigation-btn';
                nextBtn.innerHTML = '⏭️';
                nextBtn.disabled = currentPage === totalPages;
                nextBtn.setAttribute('aria-label', 'Następna strona');
                nextBtn.onclick = function() {
                    if (currentPage < totalPages) {
                        currentPage++;
                        displaySzkolenia();
                        window.scrollTo({ top: bar.offsetTop - 120, behavior: 'smooth' });
                    }
                };
                addRippleEffect(nextBtn);
                bar.appendChild(nextBtn);
                // Zaawansowana nawigacja
                const advancedNav = document.createElement('div');
                advancedNav.className = 'pagination-advanced-nav';
                advancedNav.style.display = 'flex';
                advancedNav.style.alignItems = 'center';
                advancedNav.style.gap = '12px';
                // Info o pozycji
                const positionInfo = document.createElement('span');
                positionInfo.className = 'pagination-position-info';
                positionInfo.textContent = `Strona ${currentPage} z ${totalPages}`;
                advancedNav.appendChild(positionInfo);
                // Separator
                const separator1 = document.createElement('span');
                separator1.textContent = '|';
                separator1.className = 'pagination-separator';
                advancedNav.appendChild(separator1);
                // Ile na stronę (spójnie z innymi podstronami)
                const perPageWrap = document.createElement('span');
                perPageWrap.style.display = 'flex';
                perPageWrap.style.alignItems = 'center';
                perPageWrap.style.gap = '6px';
                const perPageLabel = document.createElement('span');
                perPageLabel.className = 'pagination-jump-label';
                perPageLabel.textContent = 'Na stronę:';
                const perPageSelect = document.createElement('select');
                perPageSelect.className = 'pagination-quick-select';
                [5,10,20,50].forEach(n => {
                    const opt = document.createElement('option');
                    opt.value = String(n);
                    opt.textContent = String(n);
                    if (n === szkoleniaPerPage) opt.selected = true;
                    perPageSelect.appendChild(opt);
                });
                perPageSelect.addEventListener('change', function(){
                    const val = parseInt(this.value, 10) || 10;
                    szkoleniaPerPage = val;
                    localStorage.setItem('szkoleniaPerPage', String(val));
                    currentPage = 1;
                    displaySzkolenia();
                    window.scrollTo({ top: bar.offsetTop - 120, behavior: 'smooth' });
                });
                perPageWrap.appendChild(perPageLabel);
                perPageWrap.appendChild(perPageSelect);
                advancedNav.appendChild(perPageWrap);
                // Separator
                const separatorPer = document.createElement('span');
                separatorPer.textContent = '|';
                separatorPer.className = 'pagination-separator';
                advancedNav.appendChild(separatorPer);
                // Skok do strony
                const jumpContainer = document.createElement('span');
                jumpContainer.style.display = 'flex';
                jumpContainer.style.alignItems = 'center';
                jumpContainer.style.gap = '6px';
                const jumpLabel = document.createElement('span');
                jumpLabel.className = 'pagination-jump-label';
                jumpLabel.textContent = 'Skocz do:';
                jumpContainer.appendChild(jumpLabel);
                const jumpInput = document.createElement('input');
                jumpInput.type = 'number';
                jumpInput.min = 1;
                jumpInput.max = totalPages;
                jumpInput.className = 'pagination-jump-input';
                jumpInput.id = 'pagination-jump-input';
                jumpInput.style.width = '60px';
                jumpInput.placeholder = 'Nr str.';
                jumpInput.title = `Wpisz numer strony (1-${totalPages})\n🔥 Skróty klawiszowe:\n• Enter - przejdź do strony\n• Ctrl + ← - poprzednia strona\n• Ctrl + → - następna strona\n• Ctrl + Home - pierwsza strona\n• Ctrl + End - ostatnia strona`;
                jumpContainer.appendChild(jumpInput);
                const jumpBtn = document.createElement('button');
                jumpBtn.type = 'button';
                jumpBtn.textContent = '🚀 PRZEJDŹ';
                jumpBtn.className = 'pagination-jump-btn';
                jumpBtn.style.fontSize = '0.9rem';
                jumpBtn.style.fontWeight = 'bold';
                jumpBtn.onclick = function() {
                    let val = parseInt(jumpInput.value, 10);
                    if (isNaN(val) || val < 1) {
                        jumpInput.style.background = 'rgba(255,0,0,0.15)';
                        setTimeout(() => jumpInput.style.background = '', 800);
                        return;
                    }
                    if (val > totalPages) {
                        jumpInput.style.background = 'rgba(255,0,0,0.15)';
                        setTimeout(() => jumpInput.style.background = '', 800);
                        return;
                    }
                    if (val !== currentPage) {
                        currentPage = val;
                        displaySzkolenia();
                        window.scrollTo({ top: bar.offsetTop - 120, behavior: 'smooth' });
                    }
                };
                jumpContainer.appendChild(jumpBtn);
                advancedNav.appendChild(jumpContainer);
                // Skróty klawiszowe
                jumpInput.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter') jumpBtn.click();
                    if (e.ctrlKey) {
                        if (e.key === 'ArrowLeft') {
                            e.preventDefault();
                            if (currentPage > 1) {
                                currentPage--;
                                displaySzkolenia();
                            }
                        } else if (e.key === 'ArrowRight') {
                            e.preventDefault();
                            if (currentPage < totalPages) {
                                currentPage++;
                                displaySzkolenia();
                            }
                        } else if (e.key === 'Home') {
                            e.preventDefault();
                            if (currentPage !== 1) {
                                currentPage = 1;
                                displaySzkolenia();
                            }
                        } else if (e.key === 'End') {
                            e.preventDefault();
                            if (currentPage !== totalPages) {
                                currentPage = totalPages;
                                displaySzkolenia();
                            }
                        }
                    }
                });
                bar.appendChild(advancedNav);
            }
        function addRippleEffect(btn) {
            btn.addEventListener('click', function(e) {
                const ripple = document.createElement('span');
                ripple.className = 'ripple';
                ripple.style.left = (e.offsetX - 10) + 'px';
                ripple.style.top = (e.offsetY - 10) + 'px';
                ripple.style.width = ripple.style.height = '20px';
                btn.appendChild(ripple);
                setTimeout(() => {
                    ripple.remove();
                }, 500);
            });
        }
        function updatePaginationInfo() {
            const infoPanel = document.getElementById('pagination-info');
            if (filteredSzkolenia.length === 0) {
                infoPanel.style.display = 'none';
                return;
            }
            const start = (currentPage - 1) * szkoleniaPerPage + 1;
            const end = Math.min(currentPage * szkoleniaPerPage, filteredSzkolenia.length);
            infoPanel.innerHTML = `Wyświetlanie ${start}-${end} z ${filteredSzkolenia.length} szkoleń`;
            infoPanel.style.display = 'block';
        }
        function updateSzkoleniaCount() {
            const countEl = document.getElementById('szkoleniaCount');
            if (countEl) {
                countEl.textContent = filteredSzkolenia.length;
            }
        }
        function displaySzkolenia() {
            const container = document.getElementById('szkolenieCardsContainer');
            if (!container) return;
            if ((!Array.isArray(allSzkolenia) || allSzkolenia.length === 0)) {
                ensureDemoSzkolenia();
                allSzkolenia = window.allSzkolenia;
                filteredSzkolenia = Array.isArray(window.filteredSzkolenia) ? window.filteredSzkolenia.slice() : allSzkolenia.slice();
            }
            const start = (currentPage - 1) * szkoleniaPerPage;
            const end = start + szkoleniaPerPage;
            const szkoleniaToShow = filteredSzkolenia.slice(start, end);
            if (allSzkolenia.length === 0) {
                container.innerHTML = `<div style="text-align: center; color: #FFD700; padding: 40px;"><h3>⚠️ Brak danych szkoleń</h3><p>Nie wczytano żadnych szkoleń.</p></div>`;
                updatePaginationInfo();
                renderPaginationBar();
                return;
            }
            if (szkoleniaToShow.length === 0) {
                container.innerHTML = `<div style="text-align: center; color: #ff2222; padding: 40px;"><h3>🔍 Brak wyników wyszukiwania</h3><p>Nie znaleziono szkoleń spełniających podane kryteria.<br>Spróbuj zmienić frazę.</p></div>`;
                updatePaginationInfo();
                renderPaginationBar();
                return;
            }
            let szkoleniaHTML = '';
            szkoleniaToShow.forEach((szk, idx) => {
                const pricePart = (szk.typ === 'Płatne' && szk.cena) ? `<span style="color:#FFD700; font-weight:bold"> • ${szk.cena} zł</span>` : '';
                szkoleniaHTML += `
                <div class="job-card">
                  <div class="job-header">
                    <div>
                      <div class="job-title">${szk.tytul}</div>
                      <div class="job-location">📍 ${szk.lokalizacja || 'Dowolna lokalizacja'}</div>
                    </div>
                    <div class="job-type" style="color:${szk.typ==='Płatne'?'#FFD700':'#00ff00'}; font-weight:bold;">${szk.typ}${pricePart}</div>
                  </div>
                  <div class="job-description">${szk.opis || ''}</div>
                  <div class="job-meta" style="margin-top:8px; color:#00fff7">📅 ${szk.termin || 'Do ustalenia'}</div>
                                    <div class="job-actions">
                    <button class="btn-contact btn-details" data-tytul="${encodeURIComponent(szk.tytul)}">Szczegóły</button>
                    <button class="btn-contact btn-kontakt" data-tytul="${encodeURIComponent(szk.tytul)}">Kontakt</button>
                                        <button class="btn-contact btn-edit" data-id="${szk.id || ''}">Edytuj</button>
                  </div>
                </div>`;
            });
            container.innerHTML = `<div class="service-cards-grid job-offers-grid">${szkoleniaHTML}</div>`;
            // Podepnij zdarzenia przycisków po renderze
            container.querySelectorAll('.btn-details').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const t = btn.getAttribute('data-tytul');
                    window.showSzkolenieDetails && window.showSzkolenieDetails(decodeURIComponent(t || ''), e);
                });
            });
            container.querySelectorAll('.btn-kontakt').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const t = btn.getAttribute('data-tytul');
                    window.showSzkolenieKontakt && window.showSzkolenieKontakt(decodeURIComponent(t || ''), e);
                });
            });
            container.querySelectorAll('.btn-edit').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const id = parseInt(btn.getAttribute('data-id')||'0',10);
                    if (!id) return alert('Brak ID szkolenia do edycji.');
                    openEditSzkolenie(id);
                });
            });
            updatePaginationInfo();
            renderPaginationBar();
            updateSzkoleniaCount();
        }
    document.getElementById('szkolenieSearchForm').onsubmit = function(e) {
            e.preventDefault();
            const query = document.getElementById('szkolenieSearchInput').value.trim().toLowerCase();
            const location = document.getElementById('szkolenieLocationInput').value.trim().toLowerCase();
            const date = document.getElementById('szkolenieDateInput').value;
            filteredSzkolenia = allSzkolenia.filter(s => {
                const matchTitle = s.tytul.toLowerCase().includes(query) || (s.opis && s.opis.toLowerCase().includes(query));
                const matchLocation = !location || (s.lokalizacja && s.lokalizacja.toLowerCase().includes(location));
                const matchDate = !date || (s.termin && s.termin.startsWith(date));
                return matchTitle && matchLocation && matchDate;
            });
            currentPage = 1;
            displaySzkolenia();
            updateSzkoleniaCount();
            updatePaginationInfo();
        };
        // Inicjalizacja
    ensureDemoSzkolenia();
    displaySzkolenia();
    updateSzkoleniaCount();
    updatePaginationInfo();

        // Globalne handlery do przycisków kart
        window.showSzkolenieKontakt = function(tytul, e) {
            if (e && e.stopPropagation) e.stopPropagation();
            alert(`Kontakt ws. szkolenia: ${tytul}\n\nNapisz na: szkolenia@ecvjob.pl`);
        };
        window.showSzkolenieDetails = function(tytul, e) {
            if (e && e.stopPropagation) e.stopPropagation();
            alert(`Szczegóły szkolenia: ${tytul}`);
        };
        // --- EDYCJA SZKOLENIA ---
        function fillEditDynamicLists(szk) {
            const trainersList = document.getElementById('editTrainersList');
            const agendaList = document.getElementById('editAgendaList');
            const materialsList = document.getElementById('editMaterialsList');
            if (trainersList) trainersList.innerHTML = '';
            if (agendaList) agendaList.innerHTML = '';
            if (materialsList) materialsList.innerHTML = '';
            function addRow(parent, html, cols) {
                const row = document.createElement('div');
                row.style.display = 'grid';
                if (cols) row.style.gridTemplateColumns = cols;
                row.style.gap = '10px';
                row.style.marginBottom = '8px';
                row.innerHTML = html;
                const removeBtn = row.querySelector('.remove-row');
                if (removeBtn) removeBtn.addEventListener('click', () => row.remove());
                parent.appendChild(row);
            }
            // Trainers
            (szk.trenerzy || []).forEach(t => addRow(trainersList, `
                <input class="trainer-name" type="text" placeholder="Imię i nazwisko" value="${t.name||''}" style="padding:12px 14px;border-radius:10px;border:2px solid #00ff00;background:#181f1b;color:#fff;" />
                <input class="trainer-bio" type="text" placeholder="Specjalizacja / bio" value="${t.bio||''}" style="padding:12px 14px;border-radius:10px;border:2px solid #00ff00;background:#181f1b;color:#fff;" />
                <button type="button" class="remove-row" style="padding:10px 12px;border-radius:10px;border:2px solid #ff4444;background:#2a1515;color:#ff8888;cursor:pointer;">Usuń</button>
            `, '1fr 1fr auto'));
            if ((szk.trenerzy||[]).length===0) addRow(trainersList, `
                <input class="trainer-name" type="text" placeholder="Imię i nazwisko" value="" style="padding:12px 14px;border-radius:10px;border:2px solid #00ff00;background:#181f1b;color:#fff;" />
                <input class="trainer-bio" type="text" placeholder="Specjalizacja / bio" value="" style="padding:12px 14px;border-radius:10px;border:2px solid #00ff00;background:#181f1b;color:#fff;" />
                <button type="button" class="remove-row" style="padding:10px 12px;border-radius:10px;border:2px solid #ff4444;background:#2a1515;color:#ff8888;cursor:pointer;">Usuń</button>
            `, '1fr 1fr auto');
            // Agenda
            (szk.agenda || []).forEach(a => addRow(agendaList, `
                <input class="agenda-text" type="text" placeholder="Punkt agendy" value="${a||''}" style="padding:12px 14px;border-radius:10px;border:2px solid #00ff00;background:#181f1b;color:#fff;" />
                <button type="button" class="remove-row" style="padding:10px 12px;border-radius:10px;border:2px solid #ff4444;background:#2a1515;color:#ff8888;cursor:pointer;">Usuń</button>
            `, '1fr auto'));
            if ((szk.agenda||[]).length===0) addRow(agendaList, `
                <input class="agenda-text" type="text" placeholder="Punkt agendy" value="" style="padding:12px 14px;border-radius:10px;border:2px solid #00ff00;background:#181f1b;color:#fff;" />
                <button type="button" class="remove-row" style="padding:10px 12px;border-radius:10px;border:2px solid #ff4444;background:#2a1515;color:#ff8888;cursor:pointer;">Usuń</button>
            `, '1fr auto');
            // Materials
            (szk.materialy || []).forEach(m => addRow(materialsList, `
                <input class="material-label" type="text" placeholder="Nazwa materiału" value="${m.label||''}" style="padding:12px 14px;border-radius:10px;border:2px solid #00ff00;background:#181f1b;color:#fff;" />
                <input class="material-url" type="url" placeholder="https://link-do-materialu" value="${m.url||''}" style="padding:12px 14px;border-radius:10px;border:2px solid #00ff00;background:#181f1b;color:#fff;" />
                <button type="button" class="remove-row" style="padding:10px 12px;border-radius:10px;border:2px solid #ff4444;background:#2a1515;color:#ff8888;cursor:pointer;">Usuń</button>
            `, '1fr 1fr auto'));
            if ((szk.materialy||[]).length===0) addRow(materialsList, `
                <input class="material-label" type="text" placeholder="Nazwa materiału" value="Prezentacja PDF" style="padding:12px 14px;border-radius:10px;border:2px solid #00ff00;background:#181f1b;color:#fff;" />
                <input class="material-url" type="url" placeholder="https://link-do-materialu" value="" style="padding:12px 14px;border-radius:10px;border:2px solid #00ff00;background:#181f1b;color:#fff;" />
                <button type="button" class="remove-row" style="padding:10px 12px;border-radius:10px;border:2px solid #ff4444;background:#2a1515;color:#ff8888;cursor:pointer;">Usuń</button>
            `, '1fr 1fr auto');
        }
        function openEditSzkolenie(id) {
            const szk = (window.allSzkolenia||[]).find(s => s.id === id);
            if (!szk) return alert('Nie znaleziono szkolenia do edycji.');
            const modal = document.getElementById('editSzkolenieModal');
            if (!modal) return;
            document.getElementById('editSzkolenieId').value = id;
            document.getElementById('editTytulInput').value = szk.tytul || '';
            document.getElementById('editTypSzkoleniaSelect').value = szk.typ || 'Darmowe';
            document.getElementById('editCenaSzkoleniaSelect').value = szk.cenaPublikacji ? String(szk.cenaPublikacji) : '0';
            document.getElementById('editTrybRealizacji').value = szk.tryb || 'Online';
            document.getElementById('editJezykSzkolenia').value = szk.jezyk || '';
            document.getElementById('editLokalizacjaInput').value = szk.lokalizacja || '';
            document.getElementById('editTerminInput').value = szk.termin || '';
            let liczba = '', jednostka = 'godz.';
            if (szk.czasTrwania) {
                const m = szk.czasTrwania.match(/(\d+)\s*(godz\.|dni)/);
                if (m) { liczba = m[1]; jednostka = m[2]; }
            }
            document.getElementById('editCzasTrwania').value = liczba;
            document.getElementById('editJednostkaCzasu').value = jednostka;
            document.getElementById('editLiczbaMiejsc').value = szk.liczbaMiejsc || '';
            document.getElementById('editOpisInput').value = szk.opis || '';
            document.getElementById('editCenaKursu').value = szk.cenaKursu != null ? szk.cenaKursu : '';
            document.getElementById('editWalutaKursu').value = szk.walutaKursu || 'PLN';
            document.getElementById('editPoziomKursu').value = szk.poziom || 'Podstawowy';
            document.getElementById('editOrganizator').value = szk.organizator || '';
            document.getElementById('editKontaktEmail').value = (szk.kontakt && szk.kontakt.email) || '';
            document.getElementById('editKontaktTel').value = (szk.kontakt && szk.kontakt.tel) || '';
            document.getElementById('editLinkWWW').value = (szk.linki && szk.linki.www) || '';
            document.getElementById('editLinkFB').value = (szk.linki && szk.linki.fb) || '';
            document.getElementById('editLinkLI').value = (szk.linki && szk.linki.li) || '';
            document.getElementById('editWymagania').value = szk.wymagania || '';
            document.getElementById('editCertyfikatInfo').value = szk.certyfikat || '';
            document.getElementById('editTagiSzkolenia').value = (szk.tagi || []).join(', ');
            document.getElementById('editSzczegoly').value = szk.szczegoly || '';
            fillEditDynamicLists(szk);
            modal.style.display = 'flex';
        }
        (function(){
            const modal = document.getElementById('editSzkolenieModal');
            const closeBtn = document.getElementById('closeEditSzkolenieModal');
            const form = document.getElementById('editSzkolenieForm');
            const addTrainer = document.getElementById('addEditTrainerBtn');
            const addAgenda = document.getElementById('addEditAgendaItemBtn');
            const addMaterial = document.getElementById('addEditMaterialBtn');
            function addRow(parent, html, cols) {
                const row = document.createElement('div');
                row.style.display = 'grid';
                row.style.gridTemplateColumns = cols;
                row.style.gap = '10px';
                row.style.marginBottom = '8px';
                row.innerHTML = html;
                const removeBtn = row.querySelector('.remove-row');
                if (removeBtn) removeBtn.addEventListener('click', () => row.remove());
                parent.appendChild(row);
            }
            if (addTrainer) addTrainer.addEventListener('click', () => {
                const list = document.getElementById('editTrainersList');
                addRow(list, `
                    <input class="trainer-name" type="text" placeholder="Imię i nazwisko" value="" style="padding:12px 14px;border-radius:10px;border:2px solid #00ff00;background:#181f1b;color:#fff;" />
                    <input class="trainer-bio" type="text" placeholder="Specjalizacja / bio" value="" style="padding:12px 14px;border-radius:10px;border:2px solid #00ff00;background:#181f1b;color:#fff;" />
                    <button type="button" class="remove-row" style="padding:10px 12px;border-radius:10px;border:2px solid #ff4444;background:#2a1515;color:#ff8888;cursor:pointer;">Usuń</button>
                `, '1fr 1fr auto');
            });
            if (addAgenda) addAgenda.addEventListener('click', () => {
                const list = document.getElementById('editAgendaList');
                addRow(list, `
                    <input class="agenda-text" type="text" placeholder="Punkt agendy" value="" style="padding:12px 14px;border-radius:10px;border:2px solid #00ff00;background:#181f1b;color:#fff;" />
                    <button type="button" class="remove-row" style="padding:10px 12px;border-radius:10px;border:2px solid #ff4444;background:#2a1515;color:#ff8888;cursor:pointer;">Usuń</button>
                `, '1fr auto');
            });
            if (addMaterial) addMaterial.addEventListener('click', () => {
                const list = document.getElementById('editMaterialsList');
                addRow(list, `
                    <input class="material-label" type="text" placeholder="Nazwa materiału" value="" style="padding:12px 14px;border-radius:10px;border:2px solid #00ff00;background:#181f1b;color:#fff;" />
                    <input class="material-url" type="url" placeholder="https://link-do-materialu" value="" style="padding:12px 14px;border-radius:10px;border:2px solid #00ff00;background:#181f1b;color:#fff;" />
                    <button type="button" class="remove-row" style="padding:10px 12px;border-radius:10px;border:2px solid #ff4444;background:#2a1515;color:#ff8888;cursor:pointer;">Usuń</button>
                `, '1fr 1fr auto');
            });
            if (closeBtn && modal) closeBtn.addEventListener('click', () => modal.style.display = 'none');
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && modal && modal.style.display === 'flex') modal.style.display = 'none';
            });
            if (form) form.addEventListener('submit', (e) => {
                e.preventDefault();
                const id = parseInt(document.getElementById('editSzkolenieId').value||'0',10);
                if (!id) return;
                const tytul = document.getElementById('editTytulInput').value.trim();
                const lokalizacja = document.getElementById('editLokalizacjaInput').value.trim();
                const termin = document.getElementById('editTerminInput').value;
                const opis = document.getElementById('editOpisInput').value.trim();
                const typ = document.getElementById('editTypSzkoleniaSelect').value;
                if (!tytul || !lokalizacja || !termin || !opis) {
                    alert('Uzupełnij wymagane pola: tytuł, lokalizacja, termin, opis.');
                    return;
                }
                const tryb = document.getElementById('editTrybRealizacji').value;
                const jezyk = document.getElementById('editJezykSzkolenia').value.trim();
                const czasTrwania = document.getElementById('editCzasTrwania').value.trim();
                const jednostkaCzasu = document.getElementById('editJednostkaCzasu').value.trim();
                const liczbaMiejsc = document.getElementById('editLiczbaMiejsc').value.trim();
                const cenaKursu = document.getElementById('editCenaKursu').value.trim();
                const walutaKursu = document.getElementById('editWalutaKursu').value.trim();
                const poziomKursu = document.getElementById('editPoziomKursu').value.trim();
                const organizator = document.getElementById('editOrganizator').value.trim();
                const kontaktEmail = document.getElementById('editKontaktEmail').value.trim();
                const kontaktTel = document.getElementById('editKontaktTel').value.trim();
                const linkWWW = document.getElementById('editLinkWWW').value.trim();
                const linkFB = document.getElementById('editLinkFB').value.trim();
                const linkLI = document.getElementById('editLinkLI').value.trim();
                const wymagania = document.getElementById('editWymagania').value.trim();
                const certyfikatInfo = document.getElementById('editCertyfikatInfo').value.trim();
                const tagiStr = document.getElementById('editTagiSzkolenia').value.trim();
                const tagi = tagiStr ? tagiStr.split(',').map(s => s.trim()).filter(Boolean) : [];
                const cenaPublikacji = parseFloat(document.getElementById('editCenaSzkoleniaSelect').value || '0') || 0;
                const trenerzy = Array.from(document.querySelectorAll('#editTrainersList .trainer-name')).map(function(inp, i){
                    var bios = document.querySelectorAll('#editTrainersList .trainer-bio');
                    var bioVal = bios && bios[i] ? bios[i].value : '';
                    return { name: inp.value.trim(), bio: bioVal.trim() };
                }).filter(function(t){ return t.name; });
                const agenda = Array.from(document.querySelectorAll('#editAgendaList .agenda-text')).map(function(inp){ return inp.value.trim(); }).filter(Boolean);
                const materialy = Array.from(document.querySelectorAll('#editMaterialsList div')).map(function(row){
                    var ml = row.querySelector('.material-label');
                    var mu = row.querySelector('.material-url');
                    return {
                        label: (ml && ml.value ? ml.value : '').trim(),
                        url: (mu && mu.value ? mu.value : '').trim()
                    };
                }).filter(function(m){ return m.label || m.url; });
                const cena = typ === 'Płatne' && cenaKursu ? String(parseFloat(cenaKursu).toFixed(2)) : '0';
                const idx = (window.allSzkolenia||[]).findIndex(s => s.id === id);
                if (idx === -1) return alert('Nie znaleziono szkolenia do zapisu.');
                const prev = window.allSzkolenia[idx];
                const updated = {
                    ...prev,
                    tytul, lokalizacja, termin, opis,
                    typ, cena, cenaPublikacji,
                    tryb, jezyk,
                    czasTrwania: czasTrwania ? `${czasTrwania} ${jednostkaCzasu || ''}`.trim() : '',
                    liczbaMiejsc: liczbaMiejsc ? parseInt(liczbaMiejsc,10) : null,
                    cenaKursu: cenaKursu ? parseFloat(cenaKursu) : null,
                    walutaKursu: walutaKursu || null,
                    poziom: poziomKursu || null,
                    organizator: organizator || null,
                    kontakt: { email: kontaktEmail || null, tel: kontaktTel || null },
                    linki: { www: linkWWW || null, fb: linkFB || null, li: linkLI || null },
                    trenerzy, agenda, materialy,
                    wymagania: wymagania || null,
                    certyfikat: certyfikatInfo || null,
                    tagi
                };
                window.allSzkolenia[idx] = updated;
                window.filteredSzkolenia = window.allSzkolenia.slice();
                allSzkolenia = window.allSzkolenia;
                filteredSzkolenia = window.filteredSzkolenia.slice();
                displaySzkolenia();
                updateSzkoleniaCount();
                updatePaginationInfo();
                updateStatsCards();
                if (modal) modal.style.display = 'none';
            });
        })();
        // Jeżeli po załadowaniu strony w kontenerze nadal widnieje "Ładowanie...",
        // spróbuj ponowić render po krótkim czasie (na wypadek opóźnień innych skryptów)
        document.addEventListener('DOMContentLoaded', function(){
            setTimeout(function(){
                try {
                    const c = document.getElementById('szkolenieCardsContainer');
                    var txt = c ? (c.textContent || '') : '';
                    // Sprawdź różne warianty tekstu ładowania (z polskimi znakami i bez)
                    if (c && (/(ładowanie|ladowanie)/i).test(txt)) {
                        ensureDemoSzkolenia();
                        displaySzkolenia(); updateStatsCards();
                    }
                } catch(_) {}
            }, 250);
        });
    </script>

        

</body>
</html>
